(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 13.1' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       158,          7]
NotebookDataLength[    116825,       2303]
NotebookOptionsPosition[    114869,       2262]
NotebookOutlinePosition[    115285,       2279]
CellTagsIndexPosition[    115242,       2276]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{

Cell[CellGroupData[{
Cell["*EcoEq: SolveEcoEq / NSolveEcoEq / FindEcoEq", "Subsection",
 CellChangeTimes->{{3.6954006453555927`*^9, 3.6954006557460127`*^9}, {
   3.6962556239228687`*^9, 3.696255625343861*^9}, 
   3.699565737020871*^9},ExpressionUUID->"64e26179-57be-452a-8637-\
12a76c8bf6c0"],

Cell[CellGroupData[{

Cell["Usage", "Subsubsection",
 CellChangeTimes->{{3.769494692292095*^9, 
  3.769494692848196*^9}},ExpressionUUID->"1a30368b-a77d-4c48-8625-\
b15076ecfbfc"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"SolveEcoEq", "::", "usage"}], " ", "=", " ", "\n", 
    "\"\<SolveEcoEq[] solves for ecological equilibria.\n\
SolveEcoEq[\!\(\*StyleBox[\"vars\", \"TI\"]\)] solves for variables \
\!\(\*StyleBox[\"vars\", \"TI\"]\).\n\
SolveEcoEq[\!\(\*StyleBox[\"attributes\", \"TI\"]\)] uses trait \
values/interaction coefficients \!\(\*StyleBox[\"attributes\", \"TI\"]\).\n\
SolveEcoEq[\!\(\*StyleBox[\"attributes\", \"TI\"]\), \!\(\*StyleBox[\"vars\", \
\"TI\"]\)] solves for variables \!\(\*StyleBox[\"vars\", \"TI\"]\) using \
trait values/interaction coefficients \!\(\*StyleBox[\"attributes\", \
\"TI\"]\).\>\""}], ";"}], "\n"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"NSolveEcoEq", "::", "usage"}], " ", "=", " ", "\n", 
    "\"\<NSolveEcoEq[] numerically solves for ecological equilibria.\n\
NSolveEcoEq[\!\(\*StyleBox[\"vars\", \"TI\"]\)] numerically solves for \
variables \!\(\*StyleBox[\"vars\", \"TI\"]\).\n\
NSolveEcoEq[\!\(\*StyleBox[\"attributes\", \"TI\"]\)] uses \
traits/interactions \!\(\*StyleBox[\"attributes\", \"TI\"]\).\nNSolveEcoEq[\!\
\(\*StyleBox[\"attributes\", \"TI\"]\), \!\(\*StyleBox[\"vars\", \"TI\"]\)] \
numerically solves for variables \!\(\*StyleBox[\"vars\", \"TI\"]\) using \
trait values/interaction coefficients \!\(\*StyleBox[\"attributes\", \
\"TI\"]\).\>\""}], ";"}], "\n"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"FindEcoEq", "::", "usage"}], " ", "=", " ", "\n", 
   "\"\<FindEcoEq[\!\(\*StyleBox[\"init\", \"TI\"]\)] finds an ecological \
equilibrium using initial guess \!\(\*StyleBox[\"init\", \"TI\"]\).\n\
FindEcoEq[\!\(\*StyleBox[\"attributes\", \"TI\"]\), \!\(\*StyleBox[\"init\", \
\"TI\"]\)] uses trait values/interaction coefficients \
\!\(\*StyleBox[\"attributes\", \"TI\"]\) and initial guess \
\!\(\*StyleBox[\"init\", \"TI\"]\).\>\""}], ";"}]}], "Code",
 CellChangeTimes->{{3.76948331462147*^9, 3.769483315463594*^9}, {
   3.807375225831135*^9, 3.807375269109378*^9}, {3.807375299950779*^9, 
   3.807375331109776*^9}, {3.807375372814131*^9, 3.807375394598486*^9}, {
   3.8073754723757067`*^9, 3.807375491334848*^9}, {3.8073761836229362`*^9, 
   3.807376252238955*^9}, {3.807378136944607*^9, 3.807378170459052*^9}, 
   3.871691484169552*^9},ExpressionUUID->"00fee588-7b4a-449c-92bd-\
40d3d7dca363"]
}, Open  ]],

Cell[CellGroupData[{

Cell["Aliases", "Subsubsection",
 CellChangeTimes->{{3.7085811611223593`*^9, 
  3.708581162674871*^9}},ExpressionUUID->"2c69f6eb-c726-466e-b337-\
7aee2473f283"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{"break", " ", "up", " ", "combined", " ", "traitsandpops"}], " ", 
   "*)"}], "\n", 
  RowBox[{
   RowBox[{
    RowBox[{
     RowBox[{"SolveEcoEq", "[", 
      RowBox[{
       RowBox[{"sol_", "?", "AttributesAndGsQ"}], ",", 
       RowBox[{"opts___", "?", "OptionQ"}]}], "]"}], ":=", 
     RowBox[{"(", 
      RowBox[{"(*", 
       RowBox[{
        RowBox[{"Print", "[", "\"\<breaking up\>\"", "]"}], ";"}], "*)"}], 
      RowBox[{"SolveEcoEq", "[", 
       RowBox[{
        RowBox[{"ExtractAttributes", "[", "sol", "]"}], ",", 
        RowBox[{"ExtractVarCovs", "[", "sol", "]"}], ",", "opts"}], "]"}], 
      ")"}]}], ";"}], "\n", 
   RowBox[{
    RowBox[{
     RowBox[{"NSolveEcoEq", "[", 
      RowBox[{
       RowBox[{"sol_", "?", "AttributesAndGsQ"}], ",", 
       RowBox[{"opts___", "?", "OptionQ"}]}], "]"}], ":=", 
     RowBox[{"NSolveEcoEq", "[", 
      RowBox[{
       RowBox[{"ExtractAttributes", "[", "sol", "]"}], ",", 
       RowBox[{"ExtractVarCovs", "[", "sol", "]"}], ",", "opts"}], "]"}]}], 
    ";"}], "\n", 
   RowBox[{
    RowBox[{
     RowBox[{"FindEcoEq", "[", 
      RowBox[{
       RowBox[{"sol_", "?", "AttributesVariablesAndGsQ"}], ",", 
       RowBox[{"opts___", "?", "OptionQ"}]}], "]"}], ":=", 
     RowBox[{"FindEcoEq", "[", 
      RowBox[{
       RowBox[{"ExtractAttributes", "[", "sol", "]"}], ",", 
       RowBox[{"ExtractVarCovs", "[", "sol", "]"}], ",", 
       RowBox[{"ExtractVariables", "[", "sol", "]"}], ",", "opts"}], "]"}]}], 
    ";"}], "\n", 
   RowBox[{
    RowBox[{
     RowBox[{"FindEcoEq", "[", 
      RowBox[{
       RowBox[{"sol_", "?", "AttributesAndVariablesQ"}], ",", 
       RowBox[{"opts___", "?", "OptionQ"}]}], "]"}], ":=", 
     RowBox[{"FindEcoEq", "[", 
      RowBox[{
       RowBox[{"ExtractAttributes", "[", "sol", "]"}], ",", 
       RowBox[{"ExtractVariables", "[", "sol", "]"}], ",", "opts"}], "]"}]}], 
    ";"}]}]}]], "Code",
 CellChangeTimes->{
  3.81439019939126*^9, {3.8143902421553907`*^9, 3.814390244074677*^9}, {
   3.815478481861978*^9, 3.815478485461939*^9}, {3.817979848342904*^9, 
   3.817979848981175*^9}, {3.828997011857046*^9, 3.828997020848423*^9}, {
   3.82899707473906*^9, 3.828997115451098*^9}, {3.83303369380975*^9, 
   3.8330337216036463`*^9}, {3.8330341813928843`*^9, 3.83303420964079*^9}, 
   3.8330342614093533`*^9, {3.83303550709557*^9, 3.8330355746310062`*^9}, {
   3.8330362136371927`*^9, 3.8330362184021997`*^9}, {3.833036697301148*^9, 
   3.8330367123148613`*^9}, {3.8708106258118763`*^9, 3.870810639741461*^9}, {
   3.871690114744114*^9, 3.871690123457399*^9}, 3.871690804651754*^9, {
   3.871691143788568*^9, 3.87169114640241*^9}, {3.871691323078294*^9, 
   3.871691329665657*^9}, {3.871691377491064*^9, 3.871691389893962*^9}, {
   3.871691630946013*^9, 3.8716916322093763`*^9}, {3.8716924450334177`*^9, 
   3.871692475693556*^9}, 3.8716928046283073`*^9, 3.87169288838101*^9, {
   3.8716929268138113`*^9, 
   3.8716929443080273`*^9}},ExpressionUUID->"b6bd6869-e0d7-4a73-8760-\
daf0ec75cea8"]
}, Open  ]],

Cell[CellGroupData[{

Cell["Definitions", "Subsubsection",
 CellChangeTimes->{{3.7694936745853653`*^9, 3.769493676072991*^9}, 
   3.87169049602976*^9},ExpressionUUID->"70dd1449-e335-4e66-b1fb-\
3829b16cf57e"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"EcoEqEqns", "[", 
    RowBox[{
     RowBox[{"attributesin", ":", 
      RowBox[{"(", 
       RowBox[{"_", "?", "AttributesQ"}], ")"}], ":", 
      RowBox[{"{", "}"}]}], ",", 
     RowBox[{"Gsin", ":", 
      RowBox[{"(", 
       RowBox[{"_", "?", "GsQ"}], ")"}], ":", 
      RowBox[{"{", "}"}]}], ",", 
     RowBox[{"vars", ":", 
      RowBox[{"(", 
       RowBox[{"_List", "|", "All"}], ")"}], ":", "All"}], ",", 
     RowBox[{"opts___", "?", "OptionQ"}]}], "]"}], ":=", "\n", "\n", 
   RowBox[{"Module", "[", 
    RowBox[{
     RowBox[{"{", "\n", 
      RowBox[{"(*", " ", "options", " ", "*)"}], "\n", 
      RowBox[{
      "method", ",", "solveopts", ",", "nsolveopts", ",", "findrootopts", ",",
        "boundarydetection", ",", "time", ",", "fixed", ",", "chop", ",", 
       "qss", ",", "percapita", ",", "verbose", ",", "ignorevar", ",", "\n", 
       RowBox[{"(*", " ", 
        RowBox[{"other", " ", "variables"}], " ", "*)"}], "\n", "attributes", 
       ",", "nonvars", ",", "nonfixedvars", ",", "fixedvars", ",", "Gs", ",", 
       "removets", ",", "eqns", ",", "unks", ",", "newunk", ",", "sol", ",", 
       "res"}], "}"}], ",", "\n", "\n", 
     RowBox[{"Block", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"\[ScriptCapitalN]", ",", "verbosity", ",", 
         RowBox[{"func", "=", "\"\<EcoEqEqns\>\""}]}], "}"}], ",", "\n", "\n", 
       RowBox[{
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{"modelloaded", "\[NotEqual]", "True"}], ",", 
          RowBox[{
           RowBox[{"Message", "[", 
            RowBox[{"EcoEvoGeneral", "::", "nomodel"}], "]"}], ";", 
           RowBox[{"Return", "[", "$Failed", "]"}]}]}], "]"}], ";", "\n", 
        "\n", 
        RowBox[{"(*", " ", 
         RowBox[{"set", " ", "verbosity"}], " ", "*)"}], "\n", "\n", 
        RowBox[{"verbose", "=", 
         RowBox[{"Evaluate", "[", 
          RowBox[{"Verbose", "/.", 
           RowBox[{"Flatten", "[", 
            RowBox[{"{", 
             RowBox[{"opts", ",", 
              RowBox[{"Options", "[", "EcoEq", "]"}]}], "}"}], "]"}]}], 
          "]"}]}], ";", "\n", 
        RowBox[{"If", "[", 
         RowBox[{"verbose", ",", "\n", "\t", 
          RowBox[{"verbosity", "=", 
           RowBox[{"Max", "[", 
            RowBox[{"1", ",", 
             RowBox[{"Evaluate", "[", 
              RowBox[{"Verbosity", "/.", 
               RowBox[{"Flatten", "[", 
                RowBox[{"{", 
                 RowBox[{"opts", ",", 
                  RowBox[{"Options", "[", "EcoEq", "]"}]}], "}"}], "]"}]}], 
              "]"}]}], "]"}]}], ",", "\n", "\t", 
          RowBox[{"verbosity", "=", 
           RowBox[{"Evaluate", "[", 
            RowBox[{"Verbosity", "/.", 
             RowBox[{"Flatten", "[", 
              RowBox[{"{", 
               RowBox[{"opts", ",", 
                RowBox[{"Options", "[", "EcoEq", "]"}]}], "}"}], "]"}]}], 
            "]"}]}]}], "\n", "]"}], ";", "\n", 
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{"IntegerQ", "[", "Global`$verbosity", "]"}], ",", 
          RowBox[{"verbosity", "=", 
           RowBox[{"Max", "[", 
            RowBox[{"Global`$verbosity", ",", "verbosity"}], "]"}]}]}], "]"}],
         ";", "\n", "\n", 
        RowBox[{"(*", " ", 
         RowBox[{"handle", " ", "options"}], " ", "*)"}], "\n", "\n", 
        RowBox[{"method", "=", 
         RowBox[{"Evaluate", "[", 
          RowBox[{"Method", "/.", 
           RowBox[{"Flatten", "[", 
            RowBox[{"{", 
             RowBox[{"opts", ",", 
              RowBox[{"Options", "[", "EcoEq", "]"}]}], "}"}], "]"}]}], 
          "]"}]}], ";", "\n", 
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{"method", "===", "Automatic"}], ",", 
          RowBox[{"If", "[", 
           RowBox[{
            RowBox[{"init", "\[NotEqual]", 
             RowBox[{"{", "}"}]}], ",", 
            RowBox[{"method", "=", "\"\<FindRoot\>\""}], ",", 
            RowBox[{"method", "=", "\"\<Solve\>\""}]}], "]"}]}], "]"}], ";", 
        "\n", 
        RowBox[{"VPrint", "[", 
         RowBox[{"3", ",", "\"\<method=\>\"", ",", "method"}], "]"}], ";", 
        "\n", "\n", 
        RowBox[{"boundarydetection", "=", 
         RowBox[{"Evaluate", "[", 
          RowBox[{"BoundaryDetection", "/.", 
           RowBox[{"Flatten", "[", 
            RowBox[{"{", 
             RowBox[{"opts", ",", 
              RowBox[{"Options", "[", "EcoEq", "]"}]}], "}"}], "]"}]}], 
          "]"}]}], ";", "\n", 
        RowBox[{"time", "=", 
         RowBox[{"Evaluate", "[", 
          RowBox[{"Time", "/.", 
           RowBox[{"Flatten", "[", 
            RowBox[{"{", 
             RowBox[{"opts", ",", 
              RowBox[{"Options", "[", "EcoEq", "]"}]}], "}"}], "]"}]}], 
          "]"}]}], ";", "\n", 
        RowBox[{"chop", "=", 
         RowBox[{"Evaluate", "[", 
          RowBox[{"Chop", "/.", 
           RowBox[{"Flatten", "[", 
            RowBox[{"{", 
             RowBox[{"opts", ",", 
              RowBox[{"Options", "[", "EcoEq", "]"}]}], "}"}], "]"}]}], 
          "]"}]}], ";", "\n", 
        RowBox[{"qss", "=", 
         RowBox[{"Evaluate", "[", 
          RowBox[{"QSS", "/.", 
           RowBox[{"Flatten", "[", 
            RowBox[{"{", 
             RowBox[{"opts", ",", 
              RowBox[{"Options", "[", "EcoEq", "]"}]}], "}"}], "]"}]}], 
          "]"}]}], ";", "\n", 
        RowBox[{"fixed", "=", 
         RowBox[{"Evaluate", "[", 
          RowBox[{"Fixed", "/.", 
           RowBox[{"Flatten", "[", 
            RowBox[{"{", 
             RowBox[{"opts", ",", 
              RowBox[{"Options", "[", "EcoEq", "]"}]}], "}"}], "]"}]}], 
          "]"}]}], ";", "\n", 
        RowBox[{"percapita", "=", 
         RowBox[{"Evaluate", "[", 
          RowBox[{"PerCapita", "/.", 
           RowBox[{"Flatten", "[", 
            RowBox[{"{", 
             RowBox[{"opts", ",", 
              RowBox[{"Options", "[", "EcoEq", "]"}]}], "}"}], "]"}]}], 
          "]"}]}], ";", "\n", 
        RowBox[{"ignorevar", "=", 
         RowBox[{"Evaluate", "[", 
          RowBox[{"IgnoreVar", "/.", 
           RowBox[{"Flatten", "[", 
            RowBox[{"{", 
             RowBox[{"opts", ",", 
              RowBox[{"Options", "[", "EcoEq", "]"}]}], "}"}], "]"}]}], 
          "]"}]}], ";", "\n", "\n", 
        RowBox[{"(*", " ", 
         RowBox[{"EcoEq", " ", 
          RowBox[{"doesn", "'"}], "t", " ", "work", " ", "on", " ", 
          "Periodic", " ", "models"}], " ", "*)"}], "\n", 
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{
           RowBox[{"modelperiod", "=!=", "0"}], "&&", 
           RowBox[{"time", "===", "t"}], "&&", 
           RowBox[{"method", "\[Equal]", "\"\<FindRoot\>\""}]}], ",", 
          RowBox[{
           RowBox[{"Message", "[", 
            RowBox[{"EcoEq", "::", "noneq"}], "]"}], ";", 
           RowBox[{"Return", "[", "]"}]}]}], "]"}], ";", "\n", "\n", 
        RowBox[{"(*", " ", 
         RowBox[{"fix", " ", "attributes"}], " ", "*)"}], "\n", 
        RowBox[{"attributes", "=", 
         RowBox[{"FixAttributes", "[", "attributesin", "]"}]}], ";", "\n", 
        "\n", 
        RowBox[{"(*", " ", 
         RowBox[{
         "figure", " ", "out", " ", "number", " ", "of", " ", "species", " ", 
          "in", " ", "guilds"}], " ", "*)"}], "\n", 
        RowBox[{"Set\[ScriptCapitalN]", "[", "attributes", "]"}], ";", "\n", 
        RowBox[{"VPrint", "[", 
         RowBox[{"3", ",", "\"\<\[ScriptCapitalN]=\>\"", ",", 
          RowBox[{"Table", "[", 
           RowBox[{
            RowBox[{"\[ScriptCapitalN]", "[", "gu", "]"}], ",", 
            RowBox[{"{", 
             RowBox[{"gu", ",", "guilds"}], "}"}]}], "]"}]}], "]"}], ";", 
        "\n", "\n", 
        RowBox[{"(*", " ", 
         RowBox[{"expand", " ", "Gs"}], " ", "*)"}], "\n", 
        RowBox[{"VPrint", "[", 
         RowBox[{"3", ",", "\"\<Gsin=\>\"", ",", "Gsin"}], "]"}], ";", "\n", 
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{"method", "===", "\"\<FindRoot\>\""}], ",", "\n", "\t", 
          RowBox[{"If", "[", 
           RowBox[{"moments", ",", "\n", "\t\t", 
            RowBox[{"If", "[", 
             RowBox[{
              RowBox[{"Gsin", "===", 
               RowBox[{"{", "}"}]}], ",", 
              RowBox[{"Gs", "=", "ZeroGs"}], ",", 
              RowBox[{"Gs", "=", 
               RowBox[{"ExpandGs", "[", 
                RowBox[{"Gsin", ",", 
                 RowBox[{"Table", "[", 
                  RowBox[{
                   RowBox[{
                    RowBox[{"\[FormalCapitalN]", "[", "gu", "]"}], "\[Rule]", 
                    
                    RowBox[{"\[ScriptCapitalN]", "[", "gu", "]"}]}], ",", 
                   RowBox[{"{", 
                    RowBox[{"gu", ",", "guilds"}], "}"}]}], "]"}]}], 
                "]"}]}]}], "]"}], ",", "\n", "\t\t", 
            RowBox[{"Gs", "=", 
             RowBox[{"{", "}"}]}]}], "]"}], "\n", "\t", ",", "\n", "\t", 
          RowBox[{
           RowBox[{"Gs", "=", 
            RowBox[{"ExpandGs", "[", 
             RowBox[{"Gsin", ",", 
              RowBox[{"Table", "[", 
               RowBox[{
                RowBox[{
                 RowBox[{"\[FormalCapitalN]", "[", "gu", "]"}], "\[Rule]", 
                 RowBox[{"\[ScriptCapitalN]", "[", "gu", "]"}]}], ",", 
                RowBox[{"{", 
                 RowBox[{"gu", ",", "guilds"}], "}"}]}], "]"}]}], "]"}]}], 
           ";"}]}], "\n", "]"}], ";", "\n", 
        RowBox[{"VPrint", "[", 
         RowBox[{"3", ",", "\"\<Gs=\>\"", ",", "Gs"}], "]"}], ";", "\n", "\n", 
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{"vars", "===", "All"}], ",", "\n", "\t", 
          RowBox[{"nonvars", "=", 
           RowBox[{"{", "}"}]}], ",", "\n", "\t", 
          RowBox[{"nonvars", "=", 
           RowBox[{"OrderedComplement", "[", 
            RowBox[{"AllVariables", ",", "vars"}], "]"}]}]}], "\n", "]"}], 
        ";", "\n", 
        RowBox[{"VPrint", "[", 
         RowBox[{"3", ",", "\"\<nonvars=\>\"", ",", "nonvars"}], "]"}], ";", 
        "\n", "\n", 
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{"qss", "\[Equal]", "False"}], ",", "\n", "\t", 
          RowBox[{"fixed", "=", 
           RowBox[{"JoinFirst", "[", 
            RowBox[{"fixed", ",", 
             RowBox[{"Replace", "[", 
              RowBox[{"nonvars", ",", 
               RowBox[{"x_", "\[Rule]", 
                RowBox[{"(", 
                 RowBox[{"x", "\[Rule]", "0"}], ")"}]}], ",", "1"}], "]"}]}], 
            "]"}]}], ",", "\n", "\t", 
          RowBox[{"fixed", "=", 
           RowBox[{"JoinFirst", "[", 
            RowBox[{"fixed", ",", 
             RowBox[{"Replace", "[", 
              RowBox[{"nonvars", ",", 
               RowBox[{"x_", "\[Rule]", 
                RowBox[{"(", 
                 RowBox[{"x", "\[Rule]", "x"}], ")"}]}], ",", "1"}], "]"}]}], 
            "]"}]}]}], "\n", "]"}], ";", "\n", 
        RowBox[{"VPrint", "[", 
         RowBox[{"3", ",", "\"\<fixed=\>\"", ",", "fixed"}], "]"}], ";", "\n",
         "\n", 
        RowBox[{"fixedvars", "=", 
         RowBox[{"fixed", "\[LeftDoubleBracket]", 
          RowBox[{"All", ",", "1"}], "\[RightDoubleBracket]"}]}], ";", "\n", 
        RowBox[{"nonfixedvars", "=", 
         RowBox[{"OrderedComplement", "[", 
          RowBox[{"AllVariables", ",", "fixedvars"}], "]"}]}], ";", "\n", 
        RowBox[{"VPrint", "[", 
         RowBox[{"3", ",", "\"\<nonfixedvars=\>\"", ",", "nonfixedvars"}], 
         "]"}], ";", "\n", "\n", 
        RowBox[{"(*", " ", 
         RowBox[{
          RowBox[{"set", " ", "eqns"}], ",", " ", 
          RowBox[{"unks", " ", "and", " ", "ics"}]}], " ", "*)"}], "\n", 
        RowBox[{"eqns", "=", 
         RowBox[{
          RowBox[{
           RowBox[{
            RowBox[{
             RowBox[{
              RowBox[{"EcoEqns", "[", 
               RowBox[{"attributes", ",", 
                RowBox[{"Fixed", "\[Rule]", "fixed"}], ",", 
                RowBox[{"PerCapita", "\[Rule]", "percapita"}], ",", 
                RowBox[{"IgnoreVar", "->", "ignorevar"}]}], "]"}], "/.", 
              "Eq"}], "/.", 
             RowBox[{"t", "\[Rule]", "time"}]}], "/.", "fixed"}], "/.", 
           "attributes"}], "/.", "Gs"}]}], ";", "\n", "\n", "\n", 
        RowBox[{"VPrint", "[", 
         RowBox[{"3", ",", "\"\<eqns=\>\"", ",", "eqns"}], "]"}], ";", "\n", 
        "\n", 
        RowBox[{"Return", "[", "eqns", "]"}], ";"}]}], "\n", "\n", "]"}]}], 
    "]"}]}], ";"}]], "Code",
 CellChangeTimes->{{3.687881450105945*^9, 3.6878814505620613`*^9}, {
   3.68857168476537*^9, 3.688571684934305*^9}, {3.6885717562075033`*^9, 
   3.688571756902958*^9}, {3.688571805445076*^9, 3.6885718054840527`*^9}, {
   3.6885777801299953`*^9, 3.688577821198338*^9}, {3.688578111707645*^9, 
   3.688578263696265*^9}, {3.688583189141659*^9, 3.688583201104134*^9}, {
   3.6885837935779333`*^9, 3.688583810589251*^9}, {3.688583857663521*^9, 
   3.688583866440373*^9}, 3.688584023610524*^9, {3.688584454327429*^9, 
   3.688584464134824*^9}, {3.6885851260336657`*^9, 3.6885852077551622`*^9}, 
   3.688685223038662*^9, {3.693593326673889*^9, 3.693593328006213*^9}, {
   3.693651209563744*^9, 3.693651212696253*^9}, {3.693651330751341*^9, 
   3.693651337237907*^9}, {3.693700342037077*^9, 3.6937003445534773`*^9}, {
   3.69961046687166*^9, 3.699610497623667*^9}, 3.709124896659213*^9, {
   3.709336699110145*^9, 3.709336699577385*^9}, {3.7101059510781393`*^9, 
   3.710105954644555*^9}, {3.710254347130986*^9, 3.710254357145165*^9}, {
   3.710254389172209*^9, 3.7102544454183407`*^9}, {3.710286418340989*^9, 
   3.710286419629771*^9}, 3.710286914350444*^9, 3.7127385346721067`*^9, {
   3.714088449593779*^9, 3.714088465042605*^9}, {3.714088783139654*^9, 
   3.714088791448407*^9}, {3.714088844203219*^9, 3.71408885600861*^9}, 
   3.714089170503827*^9, {3.7140892855105886`*^9, 3.7140893056027193`*^9}, {
   3.7146455898601007`*^9, 3.714645607554661*^9}, {3.714645833218658*^9, 
   3.714645878205338*^9}, {3.7146594716484127`*^9, 3.714659498519136*^9}, {
   3.714659560420806*^9, 3.714659597546504*^9}, {3.714661306250412*^9, 
   3.7146613128544407`*^9}, {3.7146613520466423`*^9, 3.714661374692927*^9}, {
   3.714661426985828*^9, 3.714661471021627*^9}, {3.714670952581798*^9, 
   3.7146709761045732`*^9}, {3.714673053941062*^9, 3.71467307388553*^9}, {
   3.714673325535184*^9, 3.7146733431977777`*^9}, {3.714673385822101*^9, 
   3.714673408156714*^9}, {3.7146763296033154`*^9, 3.714676349908175*^9}, {
   3.714676870217898*^9, 3.7146768813446712`*^9}, {3.714677005871266*^9, 
   3.7146770388481817`*^9}, {3.714677885477186*^9, 3.714677895396152*^9}, {
   3.7146815798359137`*^9, 3.71468158317702*^9}, {3.714686709068077*^9, 
   3.714686720449131*^9}, {3.714686780357995*^9, 3.714686847805605*^9}, {
   3.714686886251251*^9, 3.7146869069408197`*^9}, {3.7146904343318*^9, 
   3.714690435561199*^9}, {3.7146905887398357`*^9, 3.714690601923481*^9}, {
   3.714690631972337*^9, 3.714690933211876*^9}, {3.714691441205781*^9, 
   3.7146914443765163`*^9}, 3.714771558293874*^9, {3.71477345759927*^9, 
   3.714773544216226*^9}, {3.714773631881823*^9, 3.714773638759398*^9}, {
   3.7147737076976557`*^9, 3.714773768872843*^9}, {3.714773810344654*^9, 
   3.714773862655966*^9}, {3.714774175646474*^9, 3.714774238321686*^9}, {
   3.714774276778345*^9, 3.714774313756324*^9}, {3.714774363666697*^9, 
   3.714774431577939*^9}, {3.71477474128935*^9, 3.714774765274622*^9}, {
   3.714774824264062*^9, 3.7147748384112673`*^9}, {3.7147748942865953`*^9, 
   3.7147749226594543`*^9}, {3.7147749728240833`*^9, 
   3.7147749743011627`*^9}, {3.714777387544536*^9, 3.714777422944803*^9}, {
   3.715423204967746*^9, 3.715423247100832*^9}, {3.716851794553669*^9, 
   3.716851838573512*^9}, {3.716851923962669*^9, 3.71685195096766*^9}, {
   3.716852009532653*^9, 3.716852055393906*^9}, {3.716852216771632*^9, 
   3.71685231192962*^9}, {3.7168523670615377`*^9, 3.71685238929698*^9}, {
   3.7168524239048243`*^9, 3.716852506519627*^9}, {3.7168526119630947`*^9, 
   3.716852660342918*^9}, {3.720561423750366*^9, 3.720561426334433*^9}, {
   3.720561478834214*^9, 3.720561481166069*^9}, {3.721849189319437*^9, 
   3.72184920349916*^9}, {3.721849430040469*^9, 3.7218494327297087`*^9}, 
   3.7218496199026947`*^9, {3.722043437583398*^9, 3.722043661426222*^9}, {
   3.722083757551734*^9, 3.72208381655929*^9}, {3.725055711251069*^9, 
   3.725055715332081*^9}, 3.7251409579843616`*^9, 3.725141965221623*^9, {
   3.728485760884264*^9, 3.728485790162279*^9}, {3.728492488068541*^9, 
   3.728492510850383*^9}, {3.728493399302709*^9, 3.728493401619061*^9}, {
   3.7284934402687283`*^9, 3.728493443062832*^9}, {3.728495197386813*^9, 
   3.7284952624184313`*^9}, {3.728495727453259*^9, 3.7284957368624372`*^9}, {
   3.728495928466558*^9, 3.72849592873841*^9}, {3.731976096240344*^9, 
   3.7319762267049303`*^9}, {3.731976277432869*^9, 3.7319762780290833`*^9}, {
   3.7319768020188913`*^9, 3.731976803777299*^9}, {3.731976892921598*^9, 
   3.731976916165578*^9}, {3.731976959563902*^9, 3.731976962085402*^9}, {
   3.731977155942281*^9, 3.73197716443357*^9}, {3.731977195279862*^9, 
   3.7319772065728207`*^9}, {3.731977279507853*^9, 3.731977284166617*^9}, {
   3.731977461555399*^9, 3.731977465980788*^9}, {3.731978006012163*^9, 
   3.731978013040636*^9}, {3.731978082421216*^9, 3.731978094010425*^9}, {
   3.731979039353709*^9, 3.731979039363929*^9}, {3.731979598523592*^9, 
   3.73197961490341*^9}, {3.73197972820308*^9, 3.7319797289924088`*^9}, {
   3.731980249144205*^9, 3.73198026694471*^9}, 3.731980373788886*^9, {
   3.7319804050810537`*^9, 3.731980445644969*^9}, {3.731980548309566*^9, 
   3.731980566185113*^9}, {3.731980610588462*^9, 3.7319806369962673`*^9}, {
   3.731980738391506*^9, 3.731980763895586*^9}, {3.731980818773868*^9, 
   3.731980857708199*^9}, {3.731980943731715*^9, 3.731981000719969*^9}, 
   3.731981067123608*^9, {3.732221099817436*^9, 3.7322211073866863`*^9}, {
   3.732237132742322*^9, 3.73223714782172*^9}, {3.732237266376129*^9, 
   3.732237271289744*^9}, {3.732273382440886*^9, 3.73227340932165*^9}, {
   3.732273491519849*^9, 3.732273491669429*^9}, {3.732394286439495*^9, 
   3.732394371996009*^9}, 3.755182267229639*^9, 3.755184973022751*^9, {
   3.75582209648076*^9, 3.7558220982190313`*^9}, {3.7558225635660257`*^9, 
   3.7558225772644787`*^9}, {3.7585221898099403`*^9, 3.7585221899906693`*^9}, 
   3.759140406004279*^9, {3.75914072046175*^9, 3.759140778591229*^9}, {
   3.759141110454555*^9, 3.7591411170112877`*^9}, 3.759142070148613*^9, {
   3.759926864600369*^9, 3.759926908779594*^9}, {3.7599440817309227`*^9, 
   3.759944089031756*^9}, {3.7599442652749147`*^9, 3.7599442925085506`*^9}, {
   3.759944468213972*^9, 3.759944470421031*^9}, {3.759944509678103*^9, 
   3.759944625568841*^9}, {3.759944680926206*^9, 3.759944704050845*^9}, {
   3.759944777100625*^9, 3.759944777332377*^9}, {3.7599452123441133`*^9, 
   3.759945212472487*^9}, 3.761151167307536*^9, 3.7613779187363462`*^9, {
   3.769182368428945*^9, 3.7691823684332743`*^9}, {3.769182447225265*^9, 
   3.769182447229724*^9}, 3.7697607053790417`*^9, 3.770438265000821*^9, {
   3.770721434046843*^9, 3.770721434486648*^9}, {3.7746909735763407`*^9, 
   3.774690974277783*^9}, 3.786090308105297*^9, 3.7860903405306396`*^9, {
   3.7861697725876913`*^9, 3.7861697838397303`*^9}, {3.7861698579109*^9, 
   3.7861698645494623`*^9}, {3.786257005170101*^9, 3.786257029661643*^9}, {
   3.786259628183383*^9, 3.78625966453019*^9}, {3.7862596972230663`*^9, 
   3.7862597130857067`*^9}, {3.786260599076335*^9, 3.7862606519012136`*^9}, {
   3.786260711471278*^9, 3.7862607825400476`*^9}, {3.786262427305735*^9, 
   3.7862624297094097`*^9}, {3.786262672446123*^9, 3.7862626757022247`*^9}, {
   3.7941372405540857`*^9, 3.794137240568924*^9}, 3.798128132723709*^9, {
   3.798232559307932*^9, 3.798232607817318*^9}, 3.8002032936287107`*^9, {
   3.800228806267811*^9, 3.8002288701566067`*^9}, {3.800229240434243*^9, 
   3.8002292588092833`*^9}, {3.800230257115494*^9, 3.800230271819356*^9}, {
   3.800230689976359*^9, 3.800230696507571*^9}, {3.800230861506472*^9, 
   3.8002308853617268`*^9}, {3.800231148936945*^9, 3.8002311628361807`*^9}, {
   3.800269707014142*^9, 3.80026972050751*^9}, {3.8004654280139236`*^9, 
   3.8004654993620977`*^9}, {3.807369332962606*^9, 3.807369333743342*^9}, {
   3.807369626808475*^9, 3.807369633505528*^9}, {3.807376451767674*^9, 
   3.807376461724361*^9}, {3.8154778674250393`*^9, 3.8154778786474133`*^9}, {
   3.8154783955502*^9, 3.8154784000536633`*^9}, {3.815479106257626*^9, 
   3.815479107656157*^9}, {3.829315987079705*^9, 3.829316001463244*^9}, 
   3.833033078563163*^9, {3.833033108685328*^9, 3.833033148581917*^9}, 
   3.833038502668605*^9, 3.835030194667267*^9, {3.859148473878541*^9, 
   3.859148484706414*^9}, 3.8591503881615667`*^9, 3.8594808660648727`*^9, 
   3.8594809215028048`*^9, {3.859481010380721*^9, 3.859481014177998*^9}, {
   3.85948118066334*^9, 3.859481183379318*^9}, {3.859481298816181*^9, 
   3.859481315770236*^9}, {3.859481351730167*^9, 3.859481376563326*^9}, {
   3.8595884244545803`*^9, 3.859588479932879*^9}, {3.859588743998242*^9, 
   3.859588765495607*^9}, {3.859588806482554*^9, 3.859588926483329*^9}, {
   3.859589076697467*^9, 3.8595890862667627`*^9}, {3.859589141801827*^9, 
   3.859589247695283*^9}, {3.859589278802657*^9, 3.8595893184973927`*^9}, {
   3.859589355053155*^9, 3.859589394885363*^9}, {3.8595894565019217`*^9, 
   3.859589464785759*^9}, {3.859589499943409*^9, 3.8595895551048613`*^9}, {
   3.859589593067071*^9, 3.8595896843311996`*^9}, 3.859589915082026*^9, {
   3.859589979348977*^9, 3.8595899793771067`*^9}, {3.859590726243621*^9, 
   3.859590757603325*^9}, 3.859640095466408*^9, {3.859648360374277*^9, 
   3.859648389450727*^9}, {3.859649217444069*^9, 3.85964922877459*^9}, {
   3.859657651647107*^9, 3.859657715461317*^9}, {3.8597223431582127`*^9, 
   3.859722349203199*^9}, {3.870793145201545*^9, 3.8707931457378817`*^9}, 
   3.870795360680627*^9, {3.870798330448287*^9, 3.870798330910715*^9}, 
   3.87079836136518*^9, {3.8707986089198017`*^9, 3.870798636358122*^9}, 
   3.8708003593862753`*^9},ExpressionUUID->"581b889c-77e1-4015-a4d7-\
dad9fdddcbe5"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"SolveEcoEq", "[", 
    RowBox[{
     RowBox[{"attributesin", ":", 
      RowBox[{"(", 
       RowBox[{"_", "?", "AttributesQ"}], ")"}], ":", 
      RowBox[{"{", "}"}]}], ",", 
     RowBox[{"Gsin", ":", 
      RowBox[{"(", 
       RowBox[{"_", "?", "GsQ"}], ")"}], ":", 
      RowBox[{"{", "}"}]}], ",", 
     RowBox[{"vars", ":", 
      RowBox[{"(", 
       RowBox[{"_List", "|", "All"}], ")"}], ":", "All"}], ",", 
     RowBox[{"opts___", "?", "OptionQ"}]}], "]"}], ":=", "\n", "\n", 
   RowBox[{"Module", "[", 
    RowBox[{
     RowBox[{"{", "\n", 
      RowBox[{"(*", " ", "options", " ", "*)"}], "\n", 
      RowBox[{
      "solveopts", ",", "boundarydetection", ",", "time", ",", "fixed", ",", 
       "chop", ",", "qss", ",", "percapita", ",", "verbose", ",", "ignorevar",
        ",", "\n", 
       RowBox[{"(*", " ", 
        RowBox[{"other", " ", "variables"}], " ", "*)"}], "\n", "attributes", 
       ",", "nonvars", ",", "nonfixedvars", ",", "fixedvars", ",", "Gs", ",", 
       "removets", ",", "eqns", ",", "unks", ",", "newunk", ",", "sol", ",", 
       "res"}], "}"}], ",", "\n", "\n", 
     RowBox[{"Block", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"\[ScriptCapitalN]", ",", "verbosity", ",", 
         RowBox[{"func", "=", "\"\<SolveEcoEq\>\""}]}], "}"}], ",", "\n", 
       "\n", 
       RowBox[{
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{"modelloaded", "\[NotEqual]", "True"}], ",", 
          RowBox[{
           RowBox[{"Message", "[", 
            RowBox[{"EcoEvoGeneral", "::", "nomodel"}], "]"}], ";", 
           RowBox[{"Return", "[", "$Failed", "]"}]}]}], "]"}], ";", "\n", 
        "\n", 
        RowBox[{"(*", " ", 
         RowBox[{"set", " ", "verbosity"}], " ", "*)"}], "\n", "\n", 
        RowBox[{"verbose", "=", 
         RowBox[{"Evaluate", "[", 
          RowBox[{"Verbose", "/.", 
           RowBox[{"Flatten", "[", 
            RowBox[{"{", 
             RowBox[{"opts", ",", 
              RowBox[{"Options", "[", "EcoEq", "]"}]}], "}"}], "]"}]}], 
          "]"}]}], ";", "\n", 
        RowBox[{"If", "[", 
         RowBox[{"verbose", ",", "\n", "\t", 
          RowBox[{"verbosity", "=", 
           RowBox[{"Max", "[", 
            RowBox[{"1", ",", 
             RowBox[{"Evaluate", "[", 
              RowBox[{"Verbosity", "/.", 
               RowBox[{"Flatten", "[", 
                RowBox[{"{", 
                 RowBox[{"opts", ",", 
                  RowBox[{"Options", "[", "EcoEq", "]"}]}], "}"}], "]"}]}], 
              "]"}]}], "]"}]}], ",", "\n", "\t", 
          RowBox[{"verbosity", "=", 
           RowBox[{"Evaluate", "[", 
            RowBox[{"Verbosity", "/.", 
             RowBox[{"Flatten", "[", 
              RowBox[{"{", 
               RowBox[{"opts", ",", 
                RowBox[{"Options", "[", "EcoEq", "]"}]}], "}"}], "]"}]}], 
            "]"}]}]}], "\n", "]"}], ";", "\n", 
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{"IntegerQ", "[", "Global`$verbosity", "]"}], ",", 
          RowBox[{"verbosity", "=", 
           RowBox[{"Max", "[", 
            RowBox[{"Global`$verbosity", ",", "verbosity"}], "]"}]}]}], "]"}],
         ";", "\n", "\n", 
        RowBox[{"(*", " ", 
         RowBox[{"handle", " ", "options"}], " ", "*)"}], "\n", "\n", 
        RowBox[{"solveopts", "=", 
         RowBox[{"Evaluate", "[", 
          RowBox[{"SolveOpts", "/.", 
           RowBox[{"Flatten", "[", 
            RowBox[{"{", 
             RowBox[{"opts", ",", 
              RowBox[{"Options", "[", "EcoEq", "]"}]}], "}"}], "]"}]}], 
          "]"}]}], ";", "\n", 
        RowBox[{"fixed", "=", 
         RowBox[{"Evaluate", "[", 
          RowBox[{"Fixed", "/.", 
           RowBox[{"Flatten", "[", 
            RowBox[{"{", 
             RowBox[{"opts", ",", 
              RowBox[{"Options", "[", "EcoEq", "]"}]}], "}"}], "]"}]}], 
          "]"}]}], ";", "\n", 
        RowBox[{"chop", "=", 
         RowBox[{"Evaluate", "[", 
          RowBox[{"Chop", "/.", 
           RowBox[{"Flatten", "[", 
            RowBox[{"{", 
             RowBox[{"opts", ",", 
              RowBox[{"Options", "[", "EcoEq", "]"}]}], "}"}], "]"}]}], 
          "]"}]}], ";", "\n", 
        RowBox[{"qss", "=", 
         RowBox[{"Evaluate", "[", 
          RowBox[{"QSS", "/.", 
           RowBox[{"Flatten", "[", 
            RowBox[{"{", 
             RowBox[{"opts", ",", 
              RowBox[{"Options", "[", "EcoEq", "]"}]}], "}"}], "]"}]}], 
          "]"}]}], ";", "\n", "\n", 
        RowBox[{"(*", " ", 
         RowBox[{"fix", " ", "attributes"}], " ", "*)"}], "\n", 
        RowBox[{"attributes", "=", 
         RowBox[{"FixAttributes", "[", "attributesin", "]"}]}], ";", "\n", 
        RowBox[{"(*", 
         RowBox[{
          RowBox[{"Print", "[", 
           RowBox[{"\"\<attributes=\>\"", ",", "attributes"}], "]"}], ";"}], 
         "*)"}], "\n", "\n", 
        RowBox[{"(*", " ", 
         RowBox[{
         "figure", " ", "out", " ", "number", " ", "of", " ", "species", " ", 
          "in", " ", "guilds"}], " ", "*)"}], "\n", 
        RowBox[{"Set\[ScriptCapitalN]", "[", "attributes", "]"}], ";", "\n", 
        RowBox[{"VPrint", "[", 
         RowBox[{"3", ",", "\"\<\[ScriptCapitalN]=\>\"", ",", 
          RowBox[{"Table", "[", 
           RowBox[{
            RowBox[{"\[ScriptCapitalN]", "[", "gu", "]"}], ",", 
            RowBox[{"{", 
             RowBox[{"gu", ",", "guilds"}], "}"}]}], "]"}]}], "]"}], ";", 
        "\n", "\n", 
        RowBox[{"(*", 
         RowBox[{
          RowBox[{"Print", "[", 
           RowBox[{"\"\<vars=\>\"", ",", "vars"}], "]"}], ";"}], "*)"}], "\n",
         "\n", 
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{"vars", "===", "All"}], ",", "\n", "\t", 
          RowBox[{"nonvars", "=", 
           RowBox[{"{", "}"}]}], ",", "\n", "\t", 
          RowBox[{"nonvars", "=", 
           RowBox[{"OrderedComplement", "[", 
            RowBox[{"AllVariables", ",", "vars"}], "]"}]}]}], "\n", "]"}], 
        ";", "\n", 
        RowBox[{"VPrint", "[", 
         RowBox[{"3", ",", "\"\<nonvars=\>\"", ",", "nonvars"}], "]"}], ";", 
        "\n", "\n", 
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{"qss", "\[Equal]", "False"}], ",", "\n", "\t", 
          RowBox[{"fixed", "=", 
           RowBox[{"JoinFirst", "[", 
            RowBox[{"fixed", ",", 
             RowBox[{"Replace", "[", 
              RowBox[{"nonvars", ",", 
               RowBox[{"x_", "\[Rule]", 
                RowBox[{"(", 
                 RowBox[{"x", "\[Rule]", "0"}], ")"}]}], ",", "1"}], "]"}]}], 
            "]"}]}], ",", "\n", "\t", 
          RowBox[{"fixed", "=", 
           RowBox[{"JoinFirst", "[", 
            RowBox[{"fixed", ",", 
             RowBox[{"Replace", "[", 
              RowBox[{"nonvars", ",", 
               RowBox[{"x_", "\[Rule]", 
                RowBox[{"(", 
                 RowBox[{"x", "\[Rule]", "x"}], ")"}]}], ",", "1"}], "]"}]}], 
            "]"}]}]}], "\n", "]"}], ";", "\n", "\n", 
        RowBox[{"(*", 
         RowBox[{
          RowBox[{"Print", "[", 
           RowBox[{"\"\<fixed=\>\"", ",", "fixed"}], "]"}], ";"}], "*)"}], 
        "\n", "\n", 
        RowBox[{"fixedvars", "=", 
         RowBox[{"fixed", "\[LeftDoubleBracket]", 
          RowBox[{"All", ",", "1"}], "\[RightDoubleBracket]"}]}], ";", "\n", 
        RowBox[{"nonfixedvars", "=", 
         RowBox[{"OrderedComplement", "[", 
          RowBox[{"AllVariables", ",", "fixedvars"}], "]"}]}], ";", "\n", 
        RowBox[{"VPrint", "[", 
         RowBox[{"3", ",", "\"\<nonfixedvars=\>\"", ",", "nonfixedvars"}], 
         "]"}], ";", "\n", "\n", 
        RowBox[{"(*", " ", 
         RowBox[{
          RowBox[{"set", " ", "eqns"}], ",", " ", 
          RowBox[{"unks", " ", "and", " ", "ics"}]}], " ", "*)"}], "\n", 
        RowBox[{"eqns", "=", 
         RowBox[{"EcoEqEqns", "[", 
          RowBox[{"attributes", ",", "Gsin", ",", "vars", ",", "opts"}], 
          "]"}]}], ";", "\n", 
        RowBox[{"unks", "=", "nonfixedvars"}], ";", "\n", "\n", 
        RowBox[{"VPrint", "[", 
         RowBox[{"3", ",", "\"\<eqns=\>\"", ",", "eqns"}], "]"}], ";", "\n", 
        RowBox[{"VPrint", "[", 
         RowBox[{"3", ",", "\"\<unks=\>\"", ",", "unks"}], "]"}], ";", "\n", 
        "\n", 
        RowBox[{"(*", " ", 
         RowBox[{"solve", " ", "it"}], " ", "*)"}], "\n", "\n", 
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{"verbosity", ">=", "1"}], ",", 
          RowBox[{"With", "[", 
           RowBox[{
            RowBox[{"{", 
             RowBox[{
              RowBox[{"eqns", "=", "eqns"}], ",", 
              RowBox[{"unks", "=", "unks"}], ",", 
              RowBox[{"options", "=", 
               RowBox[{"Sequence", "@@", "solveopts"}]}]}], "}"}], ",", 
            RowBox[{"PrintCall", "[", 
             RowBox[{"Global`sol", "=", 
              RowBox[{"Solve", "[", 
               RowBox[{"eqns", ",", "unks", ",", "options"}], "]"}]}], 
             "]"}]}], "]"}]}], "]"}], ";", "\n", 
        RowBox[{"sol", "=", 
         RowBox[{"Solve", "[", 
          RowBox[{"eqns", ",", "unks", ",", 
           RowBox[{"Evaluate", "[", 
            RowBox[{"Sequence", "@@", "solveopts"}], "]"}]}], "]"}]}], ";", 
        "\n", "\n", 
        RowBox[{"VPrint", "[", 
         RowBox[{"3", ",", "\"\<sol=\>\"", ",", "sol"}], "]"}], ";", "\n", 
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{"MemberQ", "[", 
           RowBox[{
            RowBox[{"{", 
             RowBox[{"Solve", ",", "NSolve"}], "}"}], ",", 
            RowBox[{"Head", "[", "sol", "]"}]}], "]"}], ",", 
          RowBox[{
           RowBox[{"Message", "[", 
            RowBox[{
             RowBox[{"EcoEq", "::", "nosol"}], ",", 
             RowBox[{"Head", "[", "sol", "]"}]}], "]"}], ";", 
           RowBox[{"Return", "[", "$Failed", "]"}]}]}], "]"}], ";", "\n", 
        "\n", 
        RowBox[{"(*", " ", 
         RowBox[{"add", " ", "in", " ", "Fixed", " ", "variables"}], " ", 
         "*)"}], "\n", 
        RowBox[{"res", "=", 
         RowBox[{
          RowBox[{
           RowBox[{"Join", "[", 
            RowBox[{
             RowBox[{"DeleteCases", "[", 
              RowBox[{"fixed", ",", 
               RowBox[{"var_", "\[Rule]", "var_"}]}], "]"}], ",", "#"}], 
            "]"}], "&"}], " ", "/@", " ", "sol"}]}], ";", "\n", "\n", 
        RowBox[{"If", "[", 
         RowBox[{"chop", ",", "\n", "\t", 
          RowBox[{"Return", "[", 
           RowBox[{"SortRuleList", "[", 
            RowBox[{
             RowBox[{"EqSort", "[", 
              RowBox[{"Chop", "[", "res", "]"}], "]"}], ",", "AllVariables"}],
             "]"}], "]"}], ",", "\n", "\t", 
          RowBox[{"Return", "[", 
           RowBox[{"SortRuleList", "[", 
            RowBox[{
             RowBox[{"EqSort", "[", "res", "]"}], ",", "AllVariables"}], 
            "]"}], "]"}]}], "\n", "]"}], ";"}]}], "\n", "\n", "]"}]}], 
    "]"}]}], ";"}]], "Code",
 CellChangeTimes->{{3.687881450105945*^9, 3.6878814505620613`*^9}, {
   3.68857168476537*^9, 3.688571684934305*^9}, {3.6885717562075033`*^9, 
   3.688571756902958*^9}, {3.688571805445076*^9, 3.6885718054840527`*^9}, {
   3.6885777801299953`*^9, 3.688577821198338*^9}, {3.688578111707645*^9, 
   3.688578263696265*^9}, {3.688583189141659*^9, 3.688583201104134*^9}, {
   3.6885837935779333`*^9, 3.688583810589251*^9}, {3.688583857663521*^9, 
   3.688583866440373*^9}, 3.688584023610524*^9, {3.688584454327429*^9, 
   3.688584464134824*^9}, {3.6885851260336657`*^9, 3.6885852077551622`*^9}, 
   3.688685223038662*^9, {3.693593326673889*^9, 3.693593328006213*^9}, {
   3.693651209563744*^9, 3.693651212696253*^9}, {3.693651330751341*^9, 
   3.693651337237907*^9}, {3.693700342037077*^9, 3.6937003445534773`*^9}, {
   3.69961046687166*^9, 3.699610497623667*^9}, 3.709124896659213*^9, {
   3.709336699110145*^9, 3.709336699577385*^9}, {3.7101059510781393`*^9, 
   3.710105954644555*^9}, {3.710254347130986*^9, 3.710254357145165*^9}, {
   3.710254389172209*^9, 3.7102544454183407`*^9}, {3.710286418340989*^9, 
   3.710286419629771*^9}, 3.710286914350444*^9, 3.7127385346721067`*^9, {
   3.714088449593779*^9, 3.714088465042605*^9}, {3.714088783139654*^9, 
   3.714088791448407*^9}, {3.714088844203219*^9, 3.71408885600861*^9}, 
   3.714089170503827*^9, {3.7140892855105886`*^9, 3.7140893056027193`*^9}, {
   3.7146455898601007`*^9, 3.714645607554661*^9}, {3.714645833218658*^9, 
   3.714645878205338*^9}, {3.7146594716484127`*^9, 3.714659498519136*^9}, {
   3.714659560420806*^9, 3.714659597546504*^9}, {3.714661306250412*^9, 
   3.7146613128544407`*^9}, {3.7146613520466423`*^9, 3.714661374692927*^9}, {
   3.714661426985828*^9, 3.714661471021627*^9}, {3.714670952581798*^9, 
   3.7146709761045732`*^9}, {3.714673053941062*^9, 3.71467307388553*^9}, {
   3.714673325535184*^9, 3.7146733431977777`*^9}, {3.714673385822101*^9, 
   3.714673408156714*^9}, {3.7146763296033154`*^9, 3.714676349908175*^9}, {
   3.714676870217898*^9, 3.7146768813446712`*^9}, {3.714677005871266*^9, 
   3.7146770388481817`*^9}, {3.714677885477186*^9, 3.714677895396152*^9}, {
   3.7146815798359137`*^9, 3.71468158317702*^9}, {3.714686709068077*^9, 
   3.714686720449131*^9}, {3.714686780357995*^9, 3.714686847805605*^9}, {
   3.714686886251251*^9, 3.7146869069408197`*^9}, {3.7146904343318*^9, 
   3.714690435561199*^9}, {3.7146905887398357`*^9, 3.714690601923481*^9}, {
   3.714690631972337*^9, 3.714690933211876*^9}, {3.714691441205781*^9, 
   3.7146914443765163`*^9}, 3.714771558293874*^9, {3.71477345759927*^9, 
   3.714773544216226*^9}, {3.714773631881823*^9, 3.714773638759398*^9}, {
   3.7147737076976557`*^9, 3.714773768872843*^9}, {3.714773810344654*^9, 
   3.714773862655966*^9}, {3.714774175646474*^9, 3.714774238321686*^9}, {
   3.714774276778345*^9, 3.714774313756324*^9}, {3.714774363666697*^9, 
   3.714774431577939*^9}, {3.71477474128935*^9, 3.714774765274622*^9}, {
   3.714774824264062*^9, 3.7147748384112673`*^9}, {3.7147748942865953`*^9, 
   3.7147749226594543`*^9}, {3.7147749728240833`*^9, 
   3.7147749743011627`*^9}, {3.714777387544536*^9, 3.714777422944803*^9}, {
   3.715423204967746*^9, 3.715423247100832*^9}, {3.716851794553669*^9, 
   3.716851838573512*^9}, {3.716851923962669*^9, 3.71685195096766*^9}, {
   3.716852009532653*^9, 3.716852055393906*^9}, {3.716852216771632*^9, 
   3.71685231192962*^9}, {3.7168523670615377`*^9, 3.71685238929698*^9}, {
   3.7168524239048243`*^9, 3.716852506519627*^9}, {3.7168526119630947`*^9, 
   3.716852660342918*^9}, {3.720561423750366*^9, 3.720561426334433*^9}, {
   3.720561478834214*^9, 3.720561481166069*^9}, {3.721849189319437*^9, 
   3.72184920349916*^9}, {3.721849430040469*^9, 3.7218494327297087`*^9}, 
   3.7218496199026947`*^9, {3.722043437583398*^9, 3.722043661426222*^9}, {
   3.722083757551734*^9, 3.72208381655929*^9}, {3.725055711251069*^9, 
   3.725055715332081*^9}, 3.7251409579843616`*^9, 3.725141965221623*^9, {
   3.728485760884264*^9, 3.728485790162279*^9}, {3.728492488068541*^9, 
   3.728492510850383*^9}, {3.728493399302709*^9, 3.728493401619061*^9}, {
   3.7284934402687283`*^9, 3.728493443062832*^9}, {3.728495197386813*^9, 
   3.7284952624184313`*^9}, {3.728495727453259*^9, 3.7284957368624372`*^9}, {
   3.728495928466558*^9, 3.72849592873841*^9}, {3.731976096240344*^9, 
   3.7319762267049303`*^9}, {3.731976277432869*^9, 3.7319762780290833`*^9}, {
   3.7319768020188913`*^9, 3.731976803777299*^9}, {3.731976892921598*^9, 
   3.731976916165578*^9}, {3.731976959563902*^9, 3.731976962085402*^9}, {
   3.731977155942281*^9, 3.73197716443357*^9}, {3.731977195279862*^9, 
   3.7319772065728207`*^9}, {3.731977279507853*^9, 3.731977284166617*^9}, {
   3.731977461555399*^9, 3.731977465980788*^9}, {3.731978006012163*^9, 
   3.731978013040636*^9}, {3.731978082421216*^9, 3.731978094010425*^9}, {
   3.731979039353709*^9, 3.731979039363929*^9}, {3.731979598523592*^9, 
   3.73197961490341*^9}, {3.73197972820308*^9, 3.7319797289924088`*^9}, {
   3.731980249144205*^9, 3.73198026694471*^9}, 3.731980373788886*^9, {
   3.7319804050810537`*^9, 3.731980445644969*^9}, {3.731980548309566*^9, 
   3.731980566185113*^9}, {3.731980610588462*^9, 3.7319806369962673`*^9}, {
   3.731980738391506*^9, 3.731980763895586*^9}, {3.731980818773868*^9, 
   3.731980857708199*^9}, {3.731980943731715*^9, 3.731981000719969*^9}, 
   3.731981067123608*^9, {3.732221099817436*^9, 3.7322211073866863`*^9}, {
   3.732237132742322*^9, 3.73223714782172*^9}, {3.732237266376129*^9, 
   3.732237271289744*^9}, {3.732273382440886*^9, 3.73227340932165*^9}, {
   3.732273491519849*^9, 3.732273491669429*^9}, {3.732394286439495*^9, 
   3.732394371996009*^9}, 3.755182267229639*^9, 3.755184973022751*^9, {
   3.75582209648076*^9, 3.7558220982190313`*^9}, {3.7558225635660257`*^9, 
   3.7558225772644787`*^9}, {3.7585221898099403`*^9, 3.7585221899906693`*^9}, 
   3.759140406004279*^9, {3.75914072046175*^9, 3.759140778591229*^9}, {
   3.759141110454555*^9, 3.7591411170112877`*^9}, 3.759142070148613*^9, {
   3.759926864600369*^9, 3.759926908779594*^9}, {3.7599440817309227`*^9, 
   3.759944089031756*^9}, {3.7599442652749147`*^9, 3.7599442925085506`*^9}, {
   3.759944468213972*^9, 3.759944470421031*^9}, {3.759944509678103*^9, 
   3.759944625568841*^9}, {3.759944680926206*^9, 3.759944704050845*^9}, {
   3.759944777100625*^9, 3.759944777332377*^9}, {3.7599452123441133`*^9, 
   3.759945212472487*^9}, 3.761151167307536*^9, 3.7613779187363462`*^9, {
   3.769182368428945*^9, 3.7691823684332743`*^9}, {3.769182447225265*^9, 
   3.769182447229724*^9}, 3.7697607053790417`*^9, 3.770438265000821*^9, {
   3.770721434046843*^9, 3.770721434486648*^9}, {3.7746909735763407`*^9, 
   3.774690974277783*^9}, 3.786090308105297*^9, 3.7860903405306396`*^9, {
   3.7861697725876913`*^9, 3.7861697838397303`*^9}, {3.7861698579109*^9, 
   3.7861698645494623`*^9}, {3.786257005170101*^9, 3.786257029661643*^9}, {
   3.786259628183383*^9, 3.78625966453019*^9}, {3.7862596972230663`*^9, 
   3.7862597130857067`*^9}, {3.786260599076335*^9, 3.7862606519012136`*^9}, {
   3.786260711471278*^9, 3.7862607825400476`*^9}, {3.786262427305735*^9, 
   3.7862624297094097`*^9}, {3.786262672446123*^9, 3.7862626757022247`*^9}, {
   3.7941372405540857`*^9, 3.794137240568924*^9}, 3.798128132723709*^9, {
   3.798232559307932*^9, 3.798232607817318*^9}, 3.8002032936287107`*^9, {
   3.800228806267811*^9, 3.8002288701566067`*^9}, {3.800229240434243*^9, 
   3.8002292588092833`*^9}, {3.800230257115494*^9, 3.800230271819356*^9}, {
   3.800230689976359*^9, 3.800230696507571*^9}, {3.800230861506472*^9, 
   3.8002308853617268`*^9}, {3.800231148936945*^9, 3.8002311628361807`*^9}, {
   3.800269707014142*^9, 3.80026972050751*^9}, {3.8004654280139236`*^9, 
   3.8004654993620977`*^9}, {3.807369332962606*^9, 3.807369333743342*^9}, {
   3.807369626808475*^9, 3.807369633505528*^9}, {3.807376451767674*^9, 
   3.807376461724361*^9}, {3.8154778674250393`*^9, 3.8154778786474133`*^9}, {
   3.8154783955502*^9, 3.8154784000536633`*^9}, {3.815479106257626*^9, 
   3.815479107656157*^9}, {3.829315987079705*^9, 3.829316001463244*^9}, 
   3.833033078563163*^9, {3.833033108685328*^9, 3.833033148581917*^9}, 
   3.833038502668605*^9, 3.835030194667267*^9, {3.859148473878541*^9, 
   3.859148484706414*^9}, 3.8591503881615667`*^9, 3.8594808660648727`*^9, 
   3.8594809215028048`*^9, {3.859481010380721*^9, 3.859481014177998*^9}, {
   3.85948118066334*^9, 3.859481183379318*^9}, {3.859481298816181*^9, 
   3.859481315770236*^9}, {3.859481351730167*^9, 3.859481376563326*^9}, {
   3.8595884244545803`*^9, 3.859588479932879*^9}, {3.859588743998242*^9, 
   3.859588765495607*^9}, {3.859588806482554*^9, 3.859588926483329*^9}, {
   3.859589076697467*^9, 3.8595890862667627`*^9}, {3.859589141801827*^9, 
   3.859589247695283*^9}, {3.859589278802657*^9, 3.8595893184973927`*^9}, {
   3.859589355053155*^9, 3.859589394885363*^9}, {3.8595894565019217`*^9, 
   3.859589464785759*^9}, {3.859589499943409*^9, 3.8595895551048613`*^9}, {
   3.859589593067071*^9, 3.8595896843311996`*^9}, 3.859589915082026*^9, {
   3.859589979348977*^9, 3.8595899793771067`*^9}, {3.859590726243621*^9, 
   3.859590757603325*^9}, 3.859640095466408*^9, {3.859648360374277*^9, 
   3.859648389450727*^9}, {3.859649217444069*^9, 3.85964922877459*^9}, {
   3.859657651647107*^9, 3.859657715461317*^9}, {3.8597223431582127`*^9, 
   3.859722349203199*^9}, {3.870793309356901*^9, 3.870793309988036*^9}, {
   3.87080208821593*^9, 3.870802088677804*^9}, {3.870802244077537*^9, 
   3.870802296636217*^9}, {3.870802357580971*^9, 3.87080245723883*^9}, 
   3.870802612669882*^9, 3.870802788735717*^9, {3.870802846876346*^9, 
   3.870802848200943*^9}, {3.87080303881308*^9, 3.8708030390852127`*^9}, {
   3.871689735132802*^9, 3.871689740684581*^9}, 3.871690665704505*^9, {
   3.871690711167431*^9, 3.871690724827012*^9}, {3.871693327900334*^9, 
   3.871693334551862*^9}, {3.871693369827723*^9, 3.871693370446519*^9}, 
   3.871694156412817*^9, {3.8716942525984097`*^9, 3.8716942766797457`*^9}, 
   3.871694313276289*^9, {3.8716943814873447`*^9, 
   3.871694388307624*^9}},ExpressionUUID->"0e0059c0-4683-446a-8e20-\
83a16fbbb027"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"NSolveEcoEq", "[", 
    RowBox[{
     RowBox[{"attributesin", ":", 
      RowBox[{"(", 
       RowBox[{"_", "?", "AttributesQ"}], ")"}], ":", 
      RowBox[{"{", "}"}]}], ",", 
     RowBox[{"Gsin", ":", 
      RowBox[{"(", 
       RowBox[{"_", "?", "GsQ"}], ")"}], ":", 
      RowBox[{"{", "}"}]}], ",", 
     RowBox[{"vars", ":", 
      RowBox[{"(", 
       RowBox[{"_List", "|", "All"}], ")"}], ":", "All"}], ",", 
     RowBox[{"opts___", "?", "OptionQ"}]}], "]"}], ":=", "\n", "\n", 
   RowBox[{"Module", "[", 
    RowBox[{
     RowBox[{"{", "\n", 
      RowBox[{"(*", " ", "options", " ", "*)"}], "\n", 
      RowBox[{
      "nsolveopts", ",", "fixed", ",", "chop", ",", "verbose", ",", "qss", 
       ",", "\n", 
       RowBox[{"(*", " ", 
        RowBox[{"other", " ", "variables"}], " ", "*)"}], "\n", "attributes", 
       ",", "nonvars", ",", "nonfixedvars", ",", "fixedvars", ",", "Gs", ",", 
       "removets", ",", "eqns", ",", "unks", ",", "newunk", ",", "sol", ",", 
       "res"}], "}"}], ",", "\n", "\n", 
     RowBox[{"Block", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"\[ScriptCapitalN]", ",", "verbosity", ",", 
         RowBox[{"func", "=", "\"\<NSolveEcoEq\>\""}]}], "}"}], ",", "\n", 
       "\n", 
       RowBox[{
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{"modelloaded", "\[NotEqual]", "True"}], ",", 
          RowBox[{
           RowBox[{"Message", "[", 
            RowBox[{"EcoEvoGeneral", "::", "nomodel"}], "]"}], ";", 
           RowBox[{"Return", "[", "$Failed", "]"}]}]}], "]"}], ";", "\n", 
        "\n", 
        RowBox[{"(*", " ", 
         RowBox[{"set", " ", "verbosity"}], " ", "*)"}], "\n", "\n", 
        RowBox[{"verbose", "=", 
         RowBox[{"Evaluate", "[", 
          RowBox[{"Verbose", "/.", 
           RowBox[{"Flatten", "[", 
            RowBox[{"{", 
             RowBox[{"opts", ",", 
              RowBox[{"Options", "[", "EcoEq", "]"}]}], "}"}], "]"}]}], 
          "]"}]}], ";", "\n", 
        RowBox[{"If", "[", 
         RowBox[{"verbose", ",", "\n", "\t", 
          RowBox[{"verbosity", "=", 
           RowBox[{"Max", "[", 
            RowBox[{"1", ",", 
             RowBox[{"Evaluate", "[", 
              RowBox[{"Verbosity", "/.", 
               RowBox[{"Flatten", "[", 
                RowBox[{"{", 
                 RowBox[{"opts", ",", 
                  RowBox[{"Options", "[", "EcoEq", "]"}]}], "}"}], "]"}]}], 
              "]"}]}], "]"}]}], ",", "\n", "\t", 
          RowBox[{"verbosity", "=", 
           RowBox[{"Evaluate", "[", 
            RowBox[{"Verbosity", "/.", 
             RowBox[{"Flatten", "[", 
              RowBox[{"{", 
               RowBox[{"opts", ",", 
                RowBox[{"Options", "[", "EcoEq", "]"}]}], "}"}], "]"}]}], 
            "]"}]}]}], "\n", "]"}], ";", "\n", 
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{"IntegerQ", "[", "Global`$verbosity", "]"}], ",", 
          RowBox[{"verbosity", "=", 
           RowBox[{"Max", "[", 
            RowBox[{"Global`$verbosity", ",", "verbosity"}], "]"}]}]}], "]"}],
         ";", "\n", "\n", 
        RowBox[{"(*", " ", 
         RowBox[{"handle", " ", "options"}], " ", "*)"}], "\n", "\n", 
        RowBox[{"nsolveopts", "=", 
         RowBox[{"Evaluate", "[", 
          RowBox[{"NSolveOpts", "/.", 
           RowBox[{"Flatten", "[", 
            RowBox[{"{", 
             RowBox[{"opts", ",", 
              RowBox[{"Options", "[", "EcoEq", "]"}]}], "}"}], "]"}]}], 
          "]"}]}], ";", "\n", 
        RowBox[{"fixed", "=", 
         RowBox[{"Evaluate", "[", 
          RowBox[{"Fixed", "/.", 
           RowBox[{"Flatten", "[", 
            RowBox[{"{", 
             RowBox[{"opts", ",", 
              RowBox[{"Options", "[", "EcoEq", "]"}]}], "}"}], "]"}]}], 
          "]"}]}], ";", "\n", 
        RowBox[{"chop", "=", 
         RowBox[{"Evaluate", "[", 
          RowBox[{"Chop", "/.", 
           RowBox[{"Flatten", "[", 
            RowBox[{"{", 
             RowBox[{"opts", ",", 
              RowBox[{"Options", "[", "EcoEq", "]"}]}], "}"}], "]"}]}], 
          "]"}]}], ";", "\n", 
        RowBox[{"qss", "=", 
         RowBox[{"Evaluate", "[", 
          RowBox[{"QSS", "/.", 
           RowBox[{"Flatten", "[", 
            RowBox[{"{", 
             RowBox[{"opts", ",", 
              RowBox[{"Options", "[", "EcoEq", "]"}]}], "}"}], "]"}]}], 
          "]"}]}], ";", "\n", "\n", 
        RowBox[{"(*", " ", 
         RowBox[{"fix", " ", "attributes"}], " ", "*)"}], "\n", 
        RowBox[{"attributes", "=", 
         RowBox[{"FixAttributes", "[", "attributesin", "]"}]}], ";", "\n", 
        "\n", 
        RowBox[{"(*", " ", 
         RowBox[{
         "figure", " ", "out", " ", "number", " ", "of", " ", "species", " ", 
          "in", " ", "guilds"}], " ", "*)"}], "\n", 
        RowBox[{"Set\[ScriptCapitalN]", "[", "attributes", "]"}], ";", "\n", 
        RowBox[{"VPrint", "[", 
         RowBox[{"3", ",", "\"\<\[ScriptCapitalN]=\>\"", ",", 
          RowBox[{"Table", "[", 
           RowBox[{
            RowBox[{"\[ScriptCapitalN]", "[", "gu", "]"}], ",", 
            RowBox[{"{", 
             RowBox[{"gu", ",", "guilds"}], "}"}]}], "]"}]}], "]"}], ";", 
        "\n", "\n", 
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{"vars", "===", "All"}], ",", "\n", "\t", 
          RowBox[{"nonvars", "=", 
           RowBox[{"{", "}"}]}], ",", "\n", "\t", 
          RowBox[{"nonvars", "=", 
           RowBox[{"OrderedComplement", "[", 
            RowBox[{"AllVariables", ",", "vars"}], "]"}]}]}], "\n", "]"}], 
        ";", "\n", 
        RowBox[{"VPrint", "[", 
         RowBox[{"3", ",", "\"\<nonvars=\>\"", ",", "nonvars"}], "]"}], ";", 
        "\n", "\n", 
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{"qss", "\[Equal]", "False"}], ",", "\n", "\t", 
          RowBox[{"fixed", "=", 
           RowBox[{"JoinFirst", "[", 
            RowBox[{"fixed", ",", 
             RowBox[{"Replace", "[", 
              RowBox[{"nonvars", ",", 
               RowBox[{"x_", "\[Rule]", 
                RowBox[{"(", 
                 RowBox[{"x", "\[Rule]", "0"}], ")"}]}], ",", "1"}], "]"}]}], 
            "]"}]}], ",", "\n", "\t", 
          RowBox[{"fixed", "=", 
           RowBox[{"JoinFirst", "[", 
            RowBox[{"fixed", ",", 
             RowBox[{"Replace", "[", 
              RowBox[{"nonvars", ",", 
               RowBox[{"x_", "\[Rule]", 
                RowBox[{"(", 
                 RowBox[{"x", "\[Rule]", "x"}], ")"}]}], ",", "1"}], "]"}]}], 
            "]"}]}]}], "\n", "]"}], ";", "\n", "\n", 
        RowBox[{"fixedvars", "=", 
         RowBox[{"fixed", "\[LeftDoubleBracket]", 
          RowBox[{"All", ",", "1"}], "\[RightDoubleBracket]"}]}], ";", "\n", 
        RowBox[{"nonfixedvars", "=", 
         RowBox[{"OrderedComplement", "[", 
          RowBox[{"AllVariables", ",", "fixedvars"}], "]"}]}], ";", "\n", 
        RowBox[{"VPrint", "[", 
         RowBox[{"3", ",", "\"\<nonfixedvars=\>\"", ",", "nonfixedvars"}], 
         "]"}], ";", "\n", "\n", 
        RowBox[{"(*", " ", 
         RowBox[{
          RowBox[{"set", " ", "eqns"}], ",", " ", 
          RowBox[{"unks", " ", "and", " ", "ics"}]}], " ", "*)"}], "\n", 
        RowBox[{"eqns", "=", 
         RowBox[{"EcoEqEqns", "[", 
          RowBox[{"attributes", ",", "Gsin", ",", "vars", ",", "opts"}], 
          "]"}]}], ";", "\n", 
        RowBox[{"unks", "=", "nonfixedvars"}], ";", "\n", "\n", 
        RowBox[{"VPrint", "[", 
         RowBox[{"3", ",", "\"\<eqns=\>\"", ",", "eqns"}], "]"}], ";", "\n", 
        RowBox[{"VPrint", "[", 
         RowBox[{"3", ",", "\"\<unks=\>\"", ",", "unks"}], "]"}], ";", "\n", 
        "\n", 
        RowBox[{"(*", " ", 
         RowBox[{"solve", " ", "it"}], " ", "*)"}], "\n", "\n", 
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{"verbosity", ">=", "1"}], ",", 
          RowBox[{"With", "[", 
           RowBox[{
            RowBox[{"{", 
             RowBox[{
              RowBox[{"eqns", "=", "eqns"}], ",", 
              RowBox[{"unks", "=", "unks"}], ",", 
              RowBox[{"options", "=", 
               RowBox[{"Sequence", "@@", "solveopts"}]}]}], "}"}], ",", 
            RowBox[{"PrintCall", "[", 
             RowBox[{"Global`sol", "=", 
              RowBox[{"NSolve", "[", 
               RowBox[{"eqns", ",", "unks", ",", "options"}], "]"}]}], 
             "]"}]}], "]"}]}], "]"}], ";", "\n", 
        RowBox[{"sol", "=", 
         RowBox[{"NSolve", "[", 
          RowBox[{"eqns", ",", "unks", ",", 
           RowBox[{"Evaluate", "[", 
            RowBox[{"Sequence", "@@", "nsolveopts"}], "]"}]}], "]"}]}], ";", 
        "\n", "\n", 
        RowBox[{"VPrint", "[", 
         RowBox[{"3", ",", "\"\<sol=\>\"", ",", "sol"}], "]"}], ";", "\n", 
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{
           RowBox[{"Head", "[", "sol", "]"}], "===", "NSolve"}], ",", 
          RowBox[{
           RowBox[{"Message", "[", 
            RowBox[{
             RowBox[{"EcoEq", "::", "nosol"}], ",", 
             RowBox[{"Head", "[", "sol", "]"}]}], "]"}], ";", 
           RowBox[{"Return", "[", "$Failed", "]"}]}]}], "]"}], ";", "\n", 
        "\n", 
        RowBox[{"(*", " ", 
         RowBox[{"add", " ", "in", " ", "Fixed", " ", "variables"}], " ", 
         "*)"}], "\n", 
        RowBox[{"res", "=", 
         RowBox[{
          RowBox[{
           RowBox[{"Join", "[", 
            RowBox[{
             RowBox[{"DeleteCases", "[", 
              RowBox[{"fixed", ",", 
               RowBox[{"var_", "\[Rule]", "var_"}]}], "]"}], ",", "#"}], 
            "]"}], "&"}], " ", "/@", " ", "sol"}]}], ";", "\n", "\n", 
        RowBox[{"If", "[", 
         RowBox[{"chop", ",", "\n", "\t", 
          RowBox[{"Return", "[", 
           RowBox[{"SortRuleList", "[", 
            RowBox[{
             RowBox[{"EqSort", "[", 
              RowBox[{"Chop", "[", "res", "]"}], "]"}], ",", "AllVariables"}],
             "]"}], "]"}], ",", "\n", "\t", 
          RowBox[{"Return", "[", 
           RowBox[{"SortRuleList", "[", 
            RowBox[{
             RowBox[{"EqSort", "[", "res", "]"}], ",", "AllVariables"}], 
            "]"}], "]"}]}], "\n", "]"}], ";"}]}], "\n", "\n", "]"}]}], 
    "]"}]}], ";"}]], "Code",
 CellChangeTimes->{{3.687881450105945*^9, 3.6878814505620613`*^9}, {
   3.68857168476537*^9, 3.688571684934305*^9}, {3.6885717562075033`*^9, 
   3.688571756902958*^9}, {3.688571805445076*^9, 3.6885718054840527`*^9}, {
   3.6885777801299953`*^9, 3.688577821198338*^9}, {3.688578111707645*^9, 
   3.688578263696265*^9}, {3.688583189141659*^9, 3.688583201104134*^9}, {
   3.6885837935779333`*^9, 3.688583810589251*^9}, {3.688583857663521*^9, 
   3.688583866440373*^9}, 3.688584023610524*^9, {3.688584454327429*^9, 
   3.688584464134824*^9}, {3.6885851260336657`*^9, 3.6885852077551622`*^9}, 
   3.688685223038662*^9, {3.693593326673889*^9, 3.693593328006213*^9}, {
   3.693651209563744*^9, 3.693651212696253*^9}, {3.693651330751341*^9, 
   3.693651337237907*^9}, {3.693700342037077*^9, 3.6937003445534773`*^9}, {
   3.69961046687166*^9, 3.699610497623667*^9}, 3.709124896659213*^9, {
   3.709336699110145*^9, 3.709336699577385*^9}, {3.7101059510781393`*^9, 
   3.710105954644555*^9}, {3.710254347130986*^9, 3.710254357145165*^9}, {
   3.710254389172209*^9, 3.7102544454183407`*^9}, {3.710286418340989*^9, 
   3.710286419629771*^9}, 3.710286914350444*^9, 3.7127385346721067`*^9, {
   3.714088449593779*^9, 3.714088465042605*^9}, {3.714088783139654*^9, 
   3.714088791448407*^9}, {3.714088844203219*^9, 3.71408885600861*^9}, 
   3.714089170503827*^9, {3.7140892855105886`*^9, 3.7140893056027193`*^9}, {
   3.7146455898601007`*^9, 3.714645607554661*^9}, {3.714645833218658*^9, 
   3.714645878205338*^9}, {3.7146594716484127`*^9, 3.714659498519136*^9}, {
   3.714659560420806*^9, 3.714659597546504*^9}, {3.714661306250412*^9, 
   3.7146613128544407`*^9}, {3.7146613520466423`*^9, 3.714661374692927*^9}, {
   3.714661426985828*^9, 3.714661471021627*^9}, {3.714670952581798*^9, 
   3.7146709761045732`*^9}, {3.714673053941062*^9, 3.71467307388553*^9}, {
   3.714673325535184*^9, 3.7146733431977777`*^9}, {3.714673385822101*^9, 
   3.714673408156714*^9}, {3.7146763296033154`*^9, 3.714676349908175*^9}, {
   3.714676870217898*^9, 3.7146768813446712`*^9}, {3.714677005871266*^9, 
   3.7146770388481817`*^9}, {3.714677885477186*^9, 3.714677895396152*^9}, {
   3.7146815798359137`*^9, 3.71468158317702*^9}, {3.714686709068077*^9, 
   3.714686720449131*^9}, {3.714686780357995*^9, 3.714686847805605*^9}, {
   3.714686886251251*^9, 3.7146869069408197`*^9}, {3.7146904343318*^9, 
   3.714690435561199*^9}, {3.7146905887398357`*^9, 3.714690601923481*^9}, {
   3.714690631972337*^9, 3.714690933211876*^9}, {3.714691441205781*^9, 
   3.7146914443765163`*^9}, 3.714771558293874*^9, {3.71477345759927*^9, 
   3.714773544216226*^9}, {3.714773631881823*^9, 3.714773638759398*^9}, {
   3.7147737076976557`*^9, 3.714773768872843*^9}, {3.714773810344654*^9, 
   3.714773862655966*^9}, {3.714774175646474*^9, 3.714774238321686*^9}, {
   3.714774276778345*^9, 3.714774313756324*^9}, {3.714774363666697*^9, 
   3.714774431577939*^9}, {3.71477474128935*^9, 3.714774765274622*^9}, {
   3.714774824264062*^9, 3.7147748384112673`*^9}, {3.7147748942865953`*^9, 
   3.7147749226594543`*^9}, {3.7147749728240833`*^9, 
   3.7147749743011627`*^9}, {3.714777387544536*^9, 3.714777422944803*^9}, {
   3.715423204967746*^9, 3.715423247100832*^9}, {3.716851794553669*^9, 
   3.716851838573512*^9}, {3.716851923962669*^9, 3.71685195096766*^9}, {
   3.716852009532653*^9, 3.716852055393906*^9}, {3.716852216771632*^9, 
   3.71685231192962*^9}, {3.7168523670615377`*^9, 3.71685238929698*^9}, {
   3.7168524239048243`*^9, 3.716852506519627*^9}, {3.7168526119630947`*^9, 
   3.716852660342918*^9}, {3.720561423750366*^9, 3.720561426334433*^9}, {
   3.720561478834214*^9, 3.720561481166069*^9}, {3.721849189319437*^9, 
   3.72184920349916*^9}, {3.721849430040469*^9, 3.7218494327297087`*^9}, 
   3.7218496199026947`*^9, {3.722043437583398*^9, 3.722043661426222*^9}, {
   3.722083757551734*^9, 3.72208381655929*^9}, {3.725055711251069*^9, 
   3.725055715332081*^9}, 3.7251409579843616`*^9, 3.725141965221623*^9, {
   3.728485760884264*^9, 3.728485790162279*^9}, {3.728492488068541*^9, 
   3.728492510850383*^9}, {3.728493399302709*^9, 3.728493401619061*^9}, {
   3.7284934402687283`*^9, 3.728493443062832*^9}, {3.728495197386813*^9, 
   3.7284952624184313`*^9}, {3.728495727453259*^9, 3.7284957368624372`*^9}, {
   3.728495928466558*^9, 3.72849592873841*^9}, {3.731976096240344*^9, 
   3.7319762267049303`*^9}, {3.731976277432869*^9, 3.7319762780290833`*^9}, {
   3.7319768020188913`*^9, 3.731976803777299*^9}, {3.731976892921598*^9, 
   3.731976916165578*^9}, {3.731976959563902*^9, 3.731976962085402*^9}, {
   3.731977155942281*^9, 3.73197716443357*^9}, {3.731977195279862*^9, 
   3.7319772065728207`*^9}, {3.731977279507853*^9, 3.731977284166617*^9}, {
   3.731977461555399*^9, 3.731977465980788*^9}, {3.731978006012163*^9, 
   3.731978013040636*^9}, {3.731978082421216*^9, 3.731978094010425*^9}, {
   3.731979039353709*^9, 3.731979039363929*^9}, {3.731979598523592*^9, 
   3.73197961490341*^9}, {3.73197972820308*^9, 3.7319797289924088`*^9}, {
   3.731980249144205*^9, 3.73198026694471*^9}, 3.731980373788886*^9, {
   3.7319804050810537`*^9, 3.731980445644969*^9}, {3.731980548309566*^9, 
   3.731980566185113*^9}, {3.731980610588462*^9, 3.7319806369962673`*^9}, {
   3.731980738391506*^9, 3.731980763895586*^9}, {3.731980818773868*^9, 
   3.731980857708199*^9}, {3.731980943731715*^9, 3.731981000719969*^9}, 
   3.731981067123608*^9, {3.732221099817436*^9, 3.7322211073866863`*^9}, {
   3.732237132742322*^9, 3.73223714782172*^9}, {3.732237266376129*^9, 
   3.732237271289744*^9}, {3.732273382440886*^9, 3.73227340932165*^9}, {
   3.732273491519849*^9, 3.732273491669429*^9}, {3.732394286439495*^9, 
   3.732394371996009*^9}, 3.755182267229639*^9, 3.755184973022751*^9, {
   3.75582209648076*^9, 3.7558220982190313`*^9}, {3.7558225635660257`*^9, 
   3.7558225772644787`*^9}, {3.7585221898099403`*^9, 3.7585221899906693`*^9}, 
   3.759140406004279*^9, {3.75914072046175*^9, 3.759140778591229*^9}, {
   3.759141110454555*^9, 3.7591411170112877`*^9}, 3.759142070148613*^9, {
   3.759926864600369*^9, 3.759926908779594*^9}, {3.7599440817309227`*^9, 
   3.759944089031756*^9}, {3.7599442652749147`*^9, 3.7599442925085506`*^9}, {
   3.759944468213972*^9, 3.759944470421031*^9}, {3.759944509678103*^9, 
   3.759944625568841*^9}, {3.759944680926206*^9, 3.759944704050845*^9}, {
   3.759944777100625*^9, 3.759944777332377*^9}, {3.7599452123441133`*^9, 
   3.759945212472487*^9}, 3.761151167307536*^9, 3.7613779187363462`*^9, {
   3.769182368428945*^9, 3.7691823684332743`*^9}, {3.769182447225265*^9, 
   3.769182447229724*^9}, 3.7697607053790417`*^9, 3.770438265000821*^9, {
   3.770721434046843*^9, 3.770721434486648*^9}, {3.7746909735763407`*^9, 
   3.774690974277783*^9}, 3.786090308105297*^9, 3.7860903405306396`*^9, {
   3.7861697725876913`*^9, 3.7861697838397303`*^9}, {3.7861698579109*^9, 
   3.7861698645494623`*^9}, {3.786257005170101*^9, 3.786257029661643*^9}, {
   3.786259628183383*^9, 3.78625966453019*^9}, {3.7862596972230663`*^9, 
   3.7862597130857067`*^9}, {3.786260599076335*^9, 3.7862606519012136`*^9}, {
   3.786260711471278*^9, 3.7862607825400476`*^9}, {3.786262427305735*^9, 
   3.7862624297094097`*^9}, {3.786262672446123*^9, 3.7862626757022247`*^9}, {
   3.7941372405540857`*^9, 3.794137240568924*^9}, 3.798128132723709*^9, {
   3.798232559307932*^9, 3.798232607817318*^9}, 3.8002032936287107`*^9, {
   3.800228806267811*^9, 3.8002288701566067`*^9}, {3.800229240434243*^9, 
   3.8002292588092833`*^9}, {3.800230257115494*^9, 3.800230271819356*^9}, {
   3.800230689976359*^9, 3.800230696507571*^9}, {3.800230861506472*^9, 
   3.8002308853617268`*^9}, {3.800231148936945*^9, 3.8002311628361807`*^9}, {
   3.800269707014142*^9, 3.80026972050751*^9}, {3.8004654280139236`*^9, 
   3.8004654993620977`*^9}, {3.807369332962606*^9, 3.807369333743342*^9}, {
   3.807369626808475*^9, 3.807369633505528*^9}, {3.807376451767674*^9, 
   3.807376461724361*^9}, {3.8154778674250393`*^9, 3.8154778786474133`*^9}, {
   3.8154783955502*^9, 3.8154784000536633`*^9}, {3.815479106257626*^9, 
   3.815479107656157*^9}, {3.829315987079705*^9, 3.829316001463244*^9}, 
   3.833033078563163*^9, {3.833033108685328*^9, 3.833033148581917*^9}, 
   3.833038502668605*^9, 3.835030194667267*^9, {3.859148473878541*^9, 
   3.859148484706414*^9}, 3.8591503881615667`*^9, 3.8594808660648727`*^9, 
   3.8594809215028048`*^9, {3.859481010380721*^9, 3.859481014177998*^9}, {
   3.85948118066334*^9, 3.859481183379318*^9}, {3.859481298816181*^9, 
   3.859481315770236*^9}, {3.859481351730167*^9, 3.859481376563326*^9}, {
   3.8595884244545803`*^9, 3.859588479932879*^9}, {3.859588743998242*^9, 
   3.859588765495607*^9}, {3.859588806482554*^9, 3.859588926483329*^9}, {
   3.859589076697467*^9, 3.8595890862667627`*^9}, {3.859589141801827*^9, 
   3.859589247695283*^9}, {3.859589278802657*^9, 3.8595893184973927`*^9}, {
   3.859589355053155*^9, 3.859589394885363*^9}, {3.8595894565019217`*^9, 
   3.859589464785759*^9}, {3.859589499943409*^9, 3.8595895551048613`*^9}, {
   3.859589593067071*^9, 3.8595896843311996`*^9}, 3.859589915082026*^9, {
   3.859589979348977*^9, 3.8595899793771067`*^9}, {3.859590726243621*^9, 
   3.859590757603325*^9}, 3.859640095466408*^9, {3.859648360374277*^9, 
   3.859648389450727*^9}, {3.859649217444069*^9, 3.85964922877459*^9}, {
   3.859657651647107*^9, 3.859657715461317*^9}, {3.8597223431582127`*^9, 
   3.859722349203199*^9}, {3.870793309356901*^9, 3.870793309988036*^9}, {
   3.87080208821593*^9, 3.870802088677804*^9}, {3.870802244077537*^9, 
   3.870802296636217*^9}, {3.870802357580971*^9, 3.87080245723883*^9}, 
   3.870802612669882*^9, 3.870802788735717*^9, {3.870802846876346*^9, 
   3.870802848200943*^9}, {3.870803031811883*^9, 3.870803102487256*^9}, {
   3.870803157084508*^9, 3.8708031633988543`*^9}, 3.870808993315262*^9, 
   3.870809855076426*^9, {3.871690961847453*^9, 3.8716909623743973`*^9}, {
   3.871693376148588*^9, 3.871693376833802*^9}, {3.8716941958723927`*^9, 
   3.8716941986035833`*^9}, {3.871694327570918*^9, 
   3.8716943332007513`*^9}},ExpressionUUID->"298d376b-292b-4f64-9302-\
222697f26fe4"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"FindEcoEq", "[", 
    RowBox[{
     RowBox[{"attributesin", ":", 
      RowBox[{"(", 
       RowBox[{"_", "?", "AttributesQ"}], ")"}], ":", 
      RowBox[{"{", "}"}]}], ",", 
     RowBox[{"Gsin", ":", 
      RowBox[{"(", 
       RowBox[{"_", "?", "GsQ"}], ")"}], ":", 
      RowBox[{"{", "}"}]}], ",", 
     RowBox[{"init", ":", 
      RowBox[{"(", 
       RowBox[{"_", "?", "VariablesQ"}], ")"}], ":", 
      RowBox[{"{", "}"}]}], ",", 
     RowBox[{"opts___", "?", "OptionQ"}]}], "]"}], ":=", "\n", "\n", 
   RowBox[{"Module", "[", 
    RowBox[{
     RowBox[{"{", "\n", 
      RowBox[{"(*", " ", "options", " ", "*)"}], "\n", 
      RowBox[{
      "findrootopts", ",", "boundarydetection", ",", "fixed", ",", "chop", 
       ",", "qss", ",", "verbose", ",", "\n", 
       RowBox[{"(*", " ", 
        RowBox[{"other", " ", "variables"}], " ", "*)"}], "\n", "attributes", 
       ",", "nonvars", ",", "nonfixedvars", ",", "fixedvars", ",", "Gs", ",", 
       "removets", ",", "eqns", ",", "unks", ",", "newunk", ",", "sol", ",", 
       "res"}], "}"}], ",", "\n", "\n", 
     RowBox[{"Block", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"\[ScriptCapitalN]", ",", "verbosity", ",", 
         RowBox[{"func", "=", "\"\<FindEcoEq\>\""}]}], "}"}], ",", "\n", "\n", 
       RowBox[{
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{"modelloaded", "\[NotEqual]", "True"}], ",", 
          RowBox[{
           RowBox[{"Message", "[", 
            RowBox[{"EcoEvoGeneral", "::", "nomodel"}], "]"}], ";", 
           RowBox[{"Return", "[", "$Failed", "]"}]}]}], "]"}], ";", "\n", 
        "\n", 
        RowBox[{"(*", " ", 
         RowBox[{"set", " ", "verbosity"}], " ", "*)"}], "\n", "\n", 
        RowBox[{"verbose", "=", 
         RowBox[{"Evaluate", "[", 
          RowBox[{"Verbose", "/.", 
           RowBox[{"Flatten", "[", 
            RowBox[{"{", 
             RowBox[{"opts", ",", 
              RowBox[{"Options", "[", "EcoEq", "]"}]}], "}"}], "]"}]}], 
          "]"}]}], ";", "\n", 
        RowBox[{"If", "[", 
         RowBox[{"verbose", ",", "\n", "\t", 
          RowBox[{"verbosity", "=", 
           RowBox[{"Max", "[", 
            RowBox[{"1", ",", 
             RowBox[{"Evaluate", "[", 
              RowBox[{"Verbosity", "/.", 
               RowBox[{"Flatten", "[", 
                RowBox[{"{", 
                 RowBox[{"opts", ",", 
                  RowBox[{"Options", "[", "EcoEq", "]"}]}], "}"}], "]"}]}], 
              "]"}]}], "]"}]}], ",", "\n", "\t", 
          RowBox[{"verbosity", "=", 
           RowBox[{"Evaluate", "[", 
            RowBox[{"Verbosity", "/.", 
             RowBox[{"Flatten", "[", 
              RowBox[{"{", 
               RowBox[{"opts", ",", 
                RowBox[{"Options", "[", "EcoEq", "]"}]}], "}"}], "]"}]}], 
            "]"}]}]}], "\n", "]"}], ";", "\n", 
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{"IntegerQ", "[", "Global`$verbosity", "]"}], ",", 
          RowBox[{"verbosity", "=", 
           RowBox[{"Max", "[", 
            RowBox[{"Global`$verbosity", ",", "verbosity"}], "]"}]}]}], "]"}],
         ";", "\n", "\n", 
        RowBox[{"(*", " ", 
         RowBox[{"handle", " ", "options"}], " ", "*)"}], "\n", "\n", 
        RowBox[{"findrootopts", "=", 
         RowBox[{"Evaluate", "[", 
          RowBox[{"FindRootOpts", "/.", 
           RowBox[{"Flatten", "[", 
            RowBox[{"{", 
             RowBox[{"opts", ",", 
              RowBox[{"Options", "[", "EcoEq", "]"}]}], "}"}], "]"}]}], 
          "]"}]}], ";", "\n", 
        RowBox[{"boundarydetection", "=", 
         RowBox[{"Evaluate", "[", 
          RowBox[{"BoundaryDetection", "/.", 
           RowBox[{"Flatten", "[", 
            RowBox[{"{", 
             RowBox[{"opts", ",", 
              RowBox[{"Options", "[", "EcoEq", "]"}]}], "}"}], "]"}]}], 
          "]"}]}], ";", "\n", 
        RowBox[{"fixed", "=", 
         RowBox[{"Evaluate", "[", 
          RowBox[{"Fixed", "/.", 
           RowBox[{"Flatten", "[", 
            RowBox[{"{", 
             RowBox[{"opts", ",", 
              RowBox[{"Options", "[", "EcoEq", "]"}]}], "}"}], "]"}]}], 
          "]"}]}], ";", "\n", 
        RowBox[{"chop", "=", 
         RowBox[{"Evaluate", "[", 
          RowBox[{"Chop", "/.", 
           RowBox[{"Flatten", "[", 
            RowBox[{"{", 
             RowBox[{"opts", ",", 
              RowBox[{"Options", "[", "EcoEq", "]"}]}], "}"}], "]"}]}], 
          "]"}]}], ";", "\n", 
        RowBox[{"qss", "=", 
         RowBox[{"Evaluate", "[", 
          RowBox[{"QSS", "/.", 
           RowBox[{"Flatten", "[", 
            RowBox[{"{", 
             RowBox[{"opts", ",", 
              RowBox[{"Options", "[", "EcoEq", "]"}]}], "}"}], "]"}]}], 
          "]"}]}], ";", "\n", "\n", "\n", 
        RowBox[{"(*", " ", 
         RowBox[{"fix", " ", "attributes"}], " ", "*)"}], "\n", 
        RowBox[{"attributes", "=", 
         RowBox[{"FixAttributes", "[", "attributesin", "]"}]}], ";", "\n", 
        "\n", 
        RowBox[{"(*", " ", 
         RowBox[{
         "figure", " ", "out", " ", "number", " ", "of", " ", "species", " ", 
          "in", " ", "guilds"}], " ", "*)"}], "\n", 
        RowBox[{"Set\[ScriptCapitalN]", "[", "attributes", "]"}], ";", "\n", 
        RowBox[{"VPrint", "[", 
         RowBox[{"3", ",", "\"\<\[ScriptCapitalN]=\>\"", ",", 
          RowBox[{"Table", "[", 
           RowBox[{
            RowBox[{"\[ScriptCapitalN]", "[", "gu", "]"}], ",", 
            RowBox[{"{", 
             RowBox[{"gu", ",", "guilds"}], "}"}]}], "]"}]}], "]"}], ";", 
        "\n", "\n", 
        RowBox[{"nonvars", "=", 
         RowBox[{"{", "}"}]}], ";", "\n", 
        RowBox[{"VPrint", "[", 
         RowBox[{"3", ",", "\"\<nonvars=\>\"", ",", "nonvars"}], "]"}], ";", 
        "\n", "\n", 
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{"qss", "\[Equal]", "False"}], ",", "\n", "\t", 
          RowBox[{"fixed", "=", 
           RowBox[{"JoinFirst", "[", 
            RowBox[{"fixed", ",", 
             RowBox[{"Replace", "[", 
              RowBox[{"nonvars", ",", 
               RowBox[{"x_", "\[Rule]", 
                RowBox[{"(", 
                 RowBox[{"x", "\[Rule]", "0"}], ")"}]}], ",", "1"}], "]"}]}], 
            "]"}]}], ",", "\n", "\t", 
          RowBox[{"fixed", "=", 
           RowBox[{"JoinFirst", "[", 
            RowBox[{"fixed", ",", 
             RowBox[{"Replace", "[", 
              RowBox[{"nonvars", ",", 
               RowBox[{"x_", "\[Rule]", 
                RowBox[{"(", 
                 RowBox[{"x", "\[Rule]", "x"}], ")"}]}], ",", "1"}], "]"}]}], 
            "]"}]}]}], "\n", "]"}], ";", "\n", "\n", 
        RowBox[{"fixedvars", "=", 
         RowBox[{"fixed", "\[LeftDoubleBracket]", 
          RowBox[{"All", ",", "1"}], "\[RightDoubleBracket]"}]}], ";", "\n", 
        RowBox[{"nonfixedvars", "=", 
         RowBox[{"OrderedComplement", "[", 
          RowBox[{"AllVariables", ",", "fixedvars"}], "]"}]}], ";", "\n", 
        RowBox[{"VPrint", "[", 
         RowBox[{"3", ",", "\"\<nonfixedvars=\>\"", ",", "nonfixedvars"}], 
         "]"}], ";", "\n", "\n", 
        RowBox[{"(*", " ", 
         RowBox[{
          RowBox[{"set", " ", "eqns"}], ",", " ", 
          RowBox[{"unks", " ", "and", " ", "ics"}]}], " ", "*)"}], "\n", 
        RowBox[{"eqns", "=", 
         RowBox[{"EcoEqEqns", "[", 
          RowBox[{"attributes", ",", "Gsin", ",", "opts"}], "]"}]}], ";", 
        "\n", 
        RowBox[{"unks", "=", 
         RowBox[{"Table", "[", "\n", "\t", 
          RowBox[{
           RowBox[{
            RowBox[{"newunk", "=", 
             RowBox[{"{", 
              RowBox[{"var", ",", 
               RowBox[{"(", 
                RowBox[{"var", "/.", 
                 RowBox[{"Append", "[", 
                  RowBox[{"init", ",", 
                   RowBox[{"var", "\[Rule]", "0"}]}], "]"}]}], ")"}]}], 
              "}"}]}], ";", "\n", "\t", 
            RowBox[{"If", "[", 
             RowBox[{"boundarydetection", ",", 
              RowBox[{"newunk", "=", 
               RowBox[{"Join", "[", 
                RowBox[{"newunk", ",", 
                 RowBox[{"{", 
                  RowBox[{
                   RowBox[{"Min", "[", 
                    RowBox[{"range", "[", "var", "]"}], "]"}], ",", 
                   RowBox[{"Max", "[", 
                    RowBox[{"range", "[", "var", "]"}], "]"}]}], "}"}]}], 
                "]"}]}]}], "]"}], ";", "\n", "newunk"}], ",", 
           RowBox[{"{", 
            RowBox[{"var", ",", "nonfixedvars"}], "}"}]}], "]"}]}], ";", "\n",
         "\n", 
        RowBox[{"VPrint", "[", 
         RowBox[{"3", ",", "\"\<eqns=\>\"", ",", "eqns"}], "]"}], ";", "\n", 
        RowBox[{"VPrint", "[", 
         RowBox[{"3", ",", "\"\<unks=\>\"", ",", "unks"}], "]"}], ";", "\n", 
        "\n", 
        RowBox[{"(*", " ", 
         RowBox[{"solve", " ", "it"}], " ", "*)"}], "\n", "\n", 
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{"verbosity", ">=", "1"}], ",", 
          RowBox[{"With", "[", 
           RowBox[{
            RowBox[{"{", 
             RowBox[{
              RowBox[{"eqns", "=", "eqns"}], ",", 
              RowBox[{"unks", "=", "unks"}], ",", 
              RowBox[{"options", "=", 
               RowBox[{"Sequence", "@@", "findrootopts"}]}]}], "}"}], ",", 
            RowBox[{"PrintCall", "[", 
             RowBox[{"Global`sol", "=", 
              RowBox[{"FindRoot", "[", 
               RowBox[{"eqns", ",", "unks", ",", "options"}], "]"}]}], 
             "]"}]}], "]"}]}], "]"}], ";", "\n", 
        RowBox[{"sol", "=", 
         RowBox[{"FindRoot", "[", 
          RowBox[{"eqns", ",", "unks", ",", 
           RowBox[{"Evaluate", "[", 
            RowBox[{"Sequence", "@@", "findrootopts"}], "]"}]}], "]"}]}], ";",
         "\n", "\n", 
        RowBox[{"VPrint", "[", 
         RowBox[{"3", ",", "\"\<sol=\>\"", ",", "sol"}], "]"}], ";", "\n", 
        "\n", 
        RowBox[{"(*", " ", 
         RowBox[{"add", " ", "in", " ", "Fixed", " ", "variables"}], " ", 
         "*)"}], "\n", 
        RowBox[{"res", "=", 
         RowBox[{"Join", "[", 
          RowBox[{
           RowBox[{"DeleteCases", "[", 
            RowBox[{"fixed", ",", 
             RowBox[{"var_", "\[Rule]", "var_"}]}], "]"}], ",", "sol"}], 
          "]"}]}], ";", "\n", "\n", 
        RowBox[{"If", "[", 
         RowBox[{"chop", ",", "\n", "\t", 
          RowBox[{"Return", "[", 
           RowBox[{"SortRuleList", "[", 
            RowBox[{
             RowBox[{"Chop", "[", "res", "]"}], ",", "AllVariables"}], "]"}], 
           "]"}], ",", "\n", "\t", 
          RowBox[{"Return", "[", 
           RowBox[{"SortRuleList", "[", 
            RowBox[{"res", ",", "AllVariables"}], "]"}], "]"}]}], "\n", "]"}],
         ";"}]}], "\n", "\n", "]"}]}], "]"}]}], ";"}]], "Code",
 CellChangeTimes->{{3.687881450105945*^9, 3.6878814505620613`*^9}, {
   3.68857168476537*^9, 3.688571684934305*^9}, {3.6885717562075033`*^9, 
   3.688571756902958*^9}, {3.688571805445076*^9, 3.6885718054840527`*^9}, {
   3.6885777801299953`*^9, 3.688577821198338*^9}, {3.688578111707645*^9, 
   3.688578263696265*^9}, {3.688583189141659*^9, 3.688583201104134*^9}, {
   3.6885837935779333`*^9, 3.688583810589251*^9}, {3.688583857663521*^9, 
   3.688583866440373*^9}, 3.688584023610524*^9, {3.688584454327429*^9, 
   3.688584464134824*^9}, {3.6885851260336657`*^9, 3.6885852077551622`*^9}, 
   3.688685223038662*^9, {3.693593326673889*^9, 3.693593328006213*^9}, {
   3.693651209563744*^9, 3.693651212696253*^9}, {3.693651330751341*^9, 
   3.693651337237907*^9}, {3.693700342037077*^9, 3.6937003445534773`*^9}, {
   3.69961046687166*^9, 3.699610497623667*^9}, 3.709124896659213*^9, {
   3.709336699110145*^9, 3.709336699577385*^9}, {3.7101059510781393`*^9, 
   3.710105954644555*^9}, {3.710254347130986*^9, 3.710254357145165*^9}, {
   3.710254389172209*^9, 3.7102544454183407`*^9}, {3.710286418340989*^9, 
   3.710286419629771*^9}, 3.710286914350444*^9, 3.7127385346721067`*^9, {
   3.714088449593779*^9, 3.714088465042605*^9}, {3.714088783139654*^9, 
   3.714088791448407*^9}, {3.714088844203219*^9, 3.71408885600861*^9}, 
   3.714089170503827*^9, {3.7140892855105886`*^9, 3.7140893056027193`*^9}, {
   3.7146455898601007`*^9, 3.714645607554661*^9}, {3.714645833218658*^9, 
   3.714645878205338*^9}, {3.7146594716484127`*^9, 3.714659498519136*^9}, {
   3.714659560420806*^9, 3.714659597546504*^9}, {3.714661306250412*^9, 
   3.7146613128544407`*^9}, {3.7146613520466423`*^9, 3.714661374692927*^9}, {
   3.714661426985828*^9, 3.714661471021627*^9}, {3.714670952581798*^9, 
   3.7146709761045732`*^9}, {3.714673053941062*^9, 3.71467307388553*^9}, {
   3.714673325535184*^9, 3.7146733431977777`*^9}, {3.714673385822101*^9, 
   3.714673408156714*^9}, {3.7146763296033154`*^9, 3.714676349908175*^9}, {
   3.714676870217898*^9, 3.7146768813446712`*^9}, {3.714677005871266*^9, 
   3.7146770388481817`*^9}, {3.714677885477186*^9, 3.714677895396152*^9}, {
   3.7146815798359137`*^9, 3.71468158317702*^9}, {3.714686709068077*^9, 
   3.714686720449131*^9}, {3.714686780357995*^9, 3.714686847805605*^9}, {
   3.714686886251251*^9, 3.7146869069408197`*^9}, {3.7146904343318*^9, 
   3.714690435561199*^9}, {3.7146905887398357`*^9, 3.714690601923481*^9}, {
   3.714690631972337*^9, 3.714690933211876*^9}, {3.714691441205781*^9, 
   3.7146914443765163`*^9}, 3.714771558293874*^9, {3.71477345759927*^9, 
   3.714773544216226*^9}, {3.714773631881823*^9, 3.714773638759398*^9}, {
   3.7147737076976557`*^9, 3.714773768872843*^9}, {3.714773810344654*^9, 
   3.714773862655966*^9}, {3.714774175646474*^9, 3.714774238321686*^9}, {
   3.714774276778345*^9, 3.714774313756324*^9}, {3.714774363666697*^9, 
   3.714774431577939*^9}, {3.71477474128935*^9, 3.714774765274622*^9}, {
   3.714774824264062*^9, 3.7147748384112673`*^9}, {3.7147748942865953`*^9, 
   3.7147749226594543`*^9}, {3.7147749728240833`*^9, 
   3.7147749743011627`*^9}, {3.714777387544536*^9, 3.714777422944803*^9}, {
   3.715423204967746*^9, 3.715423247100832*^9}, {3.716851794553669*^9, 
   3.716851838573512*^9}, {3.716851923962669*^9, 3.71685195096766*^9}, {
   3.716852009532653*^9, 3.716852055393906*^9}, {3.716852216771632*^9, 
   3.71685231192962*^9}, {3.7168523670615377`*^9, 3.71685238929698*^9}, {
   3.7168524239048243`*^9, 3.716852506519627*^9}, {3.7168526119630947`*^9, 
   3.716852660342918*^9}, {3.720561423750366*^9, 3.720561426334433*^9}, {
   3.720561478834214*^9, 3.720561481166069*^9}, {3.721849189319437*^9, 
   3.72184920349916*^9}, {3.721849430040469*^9, 3.7218494327297087`*^9}, 
   3.7218496199026947`*^9, {3.722043437583398*^9, 3.722043661426222*^9}, {
   3.722083757551734*^9, 3.72208381655929*^9}, {3.725055711251069*^9, 
   3.725055715332081*^9}, 3.7251409579843616`*^9, 3.725141965221623*^9, {
   3.728485760884264*^9, 3.728485790162279*^9}, {3.728492488068541*^9, 
   3.728492510850383*^9}, {3.728493399302709*^9, 3.728493401619061*^9}, {
   3.7284934402687283`*^9, 3.728493443062832*^9}, {3.728495197386813*^9, 
   3.7284952624184313`*^9}, {3.728495727453259*^9, 3.7284957368624372`*^9}, {
   3.728495928466558*^9, 3.72849592873841*^9}, {3.731976096240344*^9, 
   3.7319762267049303`*^9}, {3.731976277432869*^9, 3.7319762780290833`*^9}, {
   3.7319768020188913`*^9, 3.731976803777299*^9}, {3.731976892921598*^9, 
   3.731976916165578*^9}, {3.731976959563902*^9, 3.731976962085402*^9}, {
   3.731977155942281*^9, 3.73197716443357*^9}, {3.731977195279862*^9, 
   3.7319772065728207`*^9}, {3.731977279507853*^9, 3.731977284166617*^9}, {
   3.731977461555399*^9, 3.731977465980788*^9}, {3.731978006012163*^9, 
   3.731978013040636*^9}, {3.731978082421216*^9, 3.731978094010425*^9}, {
   3.731979039353709*^9, 3.731979039363929*^9}, {3.731979598523592*^9, 
   3.73197961490341*^9}, {3.73197972820308*^9, 3.7319797289924088`*^9}, {
   3.731980249144205*^9, 3.73198026694471*^9}, 3.731980373788886*^9, {
   3.7319804050810537`*^9, 3.731980445644969*^9}, {3.731980548309566*^9, 
   3.731980566185113*^9}, {3.731980610588462*^9, 3.7319806369962673`*^9}, {
   3.731980738391506*^9, 3.731980763895586*^9}, {3.731980818773868*^9, 
   3.731980857708199*^9}, {3.731980943731715*^9, 3.731981000719969*^9}, 
   3.731981067123608*^9, {3.732221099817436*^9, 3.7322211073866863`*^9}, {
   3.732237132742322*^9, 3.73223714782172*^9}, {3.732237266376129*^9, 
   3.732237271289744*^9}, {3.732273382440886*^9, 3.73227340932165*^9}, {
   3.732273491519849*^9, 3.732273491669429*^9}, {3.732394286439495*^9, 
   3.732394371996009*^9}, 3.755182267229639*^9, 3.755184973022751*^9, {
   3.75582209648076*^9, 3.7558220982190313`*^9}, {3.7558225635660257`*^9, 
   3.7558225772644787`*^9}, {3.7585221898099403`*^9, 3.7585221899906693`*^9}, 
   3.759140406004279*^9, {3.75914072046175*^9, 3.759140778591229*^9}, {
   3.759141110454555*^9, 3.7591411170112877`*^9}, 3.759142070148613*^9, {
   3.759926864600369*^9, 3.759926908779594*^9}, {3.7599440817309227`*^9, 
   3.759944089031756*^9}, {3.7599442652749147`*^9, 3.7599442925085506`*^9}, {
   3.759944468213972*^9, 3.759944470421031*^9}, {3.759944509678103*^9, 
   3.759944625568841*^9}, {3.759944680926206*^9, 3.759944704050845*^9}, {
   3.759944777100625*^9, 3.759944777332377*^9}, {3.7599452123441133`*^9, 
   3.759945212472487*^9}, 3.761151167307536*^9, 3.7613779187363462`*^9, {
   3.769182368428945*^9, 3.7691823684332743`*^9}, {3.769182447225265*^9, 
   3.769182447229724*^9}, 3.7697607053790417`*^9, 3.770438265000821*^9, {
   3.770721434046843*^9, 3.770721434486648*^9}, {3.7746909735763407`*^9, 
   3.774690974277783*^9}, 3.786090308105297*^9, 3.7860903405306396`*^9, {
   3.7861697725876913`*^9, 3.7861697838397303`*^9}, {3.7861698579109*^9, 
   3.7861698645494623`*^9}, {3.786257005170101*^9, 3.786257029661643*^9}, {
   3.786259628183383*^9, 3.78625966453019*^9}, {3.7862596972230663`*^9, 
   3.7862597130857067`*^9}, {3.786260599076335*^9, 3.7862606519012136`*^9}, {
   3.786260711471278*^9, 3.7862607825400476`*^9}, {3.786262427305735*^9, 
   3.7862624297094097`*^9}, {3.786262672446123*^9, 3.7862626757022247`*^9}, {
   3.7941372405540857`*^9, 3.794137240568924*^9}, 3.798128132723709*^9, {
   3.798232559307932*^9, 3.798232607817318*^9}, 3.8002032936287107`*^9, {
   3.800228806267811*^9, 3.8002288701566067`*^9}, {3.800229240434243*^9, 
   3.8002292588092833`*^9}, {3.800230257115494*^9, 3.800230271819356*^9}, {
   3.800230689976359*^9, 3.800230696507571*^9}, {3.800230861506472*^9, 
   3.8002308853617268`*^9}, {3.800231148936945*^9, 3.8002311628361807`*^9}, {
   3.800269707014142*^9, 3.80026972050751*^9}, {3.8004654280139236`*^9, 
   3.8004654993620977`*^9}, {3.807369332962606*^9, 3.807369333743342*^9}, {
   3.807369626808475*^9, 3.807369633505528*^9}, {3.807376451767674*^9, 
   3.807376461724361*^9}, {3.8154778674250393`*^9, 3.8154778786474133`*^9}, {
   3.8154783955502*^9, 3.8154784000536633`*^9}, {3.815479106257626*^9, 
   3.815479107656157*^9}, {3.829315987079705*^9, 3.829316001463244*^9}, 
   3.833033078563163*^9, {3.833033108685328*^9, 3.833033148581917*^9}, 
   3.833038502668605*^9, 3.835030194667267*^9, {3.859148473878541*^9, 
   3.859148484706414*^9}, 3.8591503881615667`*^9, 3.8594808660648727`*^9, 
   3.8594809215028048`*^9, {3.859481010380721*^9, 3.859481014177998*^9}, {
   3.85948118066334*^9, 3.859481183379318*^9}, {3.859481298816181*^9, 
   3.859481315770236*^9}, {3.859481351730167*^9, 3.859481376563326*^9}, {
   3.8595884244545803`*^9, 3.859588479932879*^9}, {3.859588743998242*^9, 
   3.859588765495607*^9}, {3.859588806482554*^9, 3.859588926483329*^9}, {
   3.859589076697467*^9, 3.8595890862667627`*^9}, {3.859589141801827*^9, 
   3.859589247695283*^9}, {3.859589278802657*^9, 3.8595893184973927`*^9}, {
   3.859589355053155*^9, 3.859589394885363*^9}, {3.8595894565019217`*^9, 
   3.859589464785759*^9}, {3.859589499943409*^9, 3.8595895551048613`*^9}, {
   3.859589593067071*^9, 3.8595896843311996`*^9}, 3.859589915082026*^9, {
   3.859589979348977*^9, 3.8595899793771067`*^9}, {3.859590726243621*^9, 
   3.859590757603325*^9}, 3.859640095466408*^9, {3.859648360374277*^9, 
   3.859648389450727*^9}, {3.859649217444069*^9, 3.85964922877459*^9}, {
   3.859657651647107*^9, 3.859657715461317*^9}, {3.8597223431582127`*^9, 
   3.859722349203199*^9}, {3.870793309356901*^9, 3.870793309988036*^9}, {
   3.87080208821593*^9, 3.870802088677804*^9}, {3.870802244077537*^9, 
   3.870802296636217*^9}, {3.870802357580971*^9, 3.87080245723883*^9}, 
   3.870802612669882*^9, 3.870802788735717*^9, {3.870802846876346*^9, 
   3.870802848200943*^9}, {3.870803031811883*^9, 3.870803102487256*^9}, {
   3.870803157084508*^9, 3.8708031633988543`*^9}, 3.870808993315262*^9, {
   3.8708094610930643`*^9, 3.870809461379199*^9}, {3.870809498326168*^9, 
   3.8708095059399767`*^9}, {3.8708098478266487`*^9, 
   3.8708098506771393`*^9}, {3.870810059050034*^9, 3.8708100935569973`*^9}, 
   3.870810245959301*^9, {3.870810347191215*^9, 3.870810436928731*^9}, {
   3.870810585488409*^9, 3.8708105907996693`*^9}, {3.870810852992383*^9, 
   3.870810860417335*^9}, {3.870810912006113*^9, 3.8708109398936577`*^9}, 
   3.870812068423291*^9, {3.8708121040627193`*^9, 3.870812129554137*^9}, {
   3.8708121949019136`*^9, 3.870812197881735*^9}, 3.870812287398467*^9, {
   3.871690972320306*^9, 3.871690972592798*^9}, {3.8716933905079927`*^9, 
   3.87169339106166*^9}, 3.8716941706813097`*^9, {3.871694340730679*^9, 
   3.871694345560749*^9}, {3.871695043097875*^9, 3.87169504976842*^9}, {
   3.8716951332710257`*^9, 
   3.871695165457069*^9}},ExpressionUUID->"42c2d6c7-2b41-4fc7-b900-\
a08d6087cbbb"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"FindEcoEq", "[", 
    RowBox[{
     RowBox[{"attributesin", ":", 
      RowBox[{"(", 
       RowBox[{"_", "?", "AttributesQ"}], ")"}], ":", 
      RowBox[{"{", "}"}]}], ",", 
     RowBox[{"Gsin", ":", 
      RowBox[{"(", 
       RowBox[{"_", "?", "GsQ"}], ")"}], ":", 
      RowBox[{"{", "}"}]}], ",", "vars__List", ",", 
     RowBox[{"opts___", "?", "OptionQ"}]}], "]"}], ":=", "\n", "\n", 
   RowBox[{"Module", "[", 
    RowBox[{
     RowBox[{"{", "\n", 
      RowBox[{"(*", " ", "options", " ", "*)"}], "\n", 
      RowBox[{
      "findrootsopts", ",", "fixed", ",", "chop", ",", "qss", ",", "verbose", 
       ",", "\n", 
       RowBox[{"(*", " ", 
        RowBox[{"other", " ", "variables"}], " ", "*)"}], "\n", "attributes", 
       ",", "nonvars", ",", "nonfixedvars", ",", "fixedvars", ",", "Gs", ",", 
       "removets", ",", "eqns", ",", "unks", ",", "newunk", ",", "sol", ",", 
       "res"}], "}"}], ",", "\n", "\n", 
     RowBox[{"Block", "[", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"\[ScriptCapitalN]", ",", "verbosity", ",", 
         RowBox[{"func", "=", "\"\<FindEcoEq (FindRoots)\>\""}]}], "}"}], ",",
        "\n", 
       RowBox[{
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{"modelloaded", "\[NotEqual]", "True"}], ",", 
          RowBox[{
           RowBox[{"Message", "[", 
            RowBox[{"EcoEvoGeneral", "::", "nomodel"}], "]"}], ";", 
           RowBox[{"Return", "[", "$Failed", "]"}]}]}], "]"}], ";", "\n", 
        "\n", 
        RowBox[{"(*", " ", 
         RowBox[{"set", " ", "verbosity"}], " ", "*)"}], "\n", "\n", 
        RowBox[{"verbose", "=", 
         RowBox[{"Evaluate", "[", 
          RowBox[{"Verbose", "/.", 
           RowBox[{"Flatten", "[", 
            RowBox[{"{", 
             RowBox[{"opts", ",", 
              RowBox[{"Options", "[", "EcoEq", "]"}]}], "}"}], "]"}]}], 
          "]"}]}], ";", "\n", 
        RowBox[{"If", "[", 
         RowBox[{"verbose", ",", "\n", "\t", 
          RowBox[{"verbosity", "=", 
           RowBox[{"Max", "[", 
            RowBox[{"1", ",", 
             RowBox[{"Evaluate", "[", 
              RowBox[{"Verbosity", "/.", 
               RowBox[{"Flatten", "[", 
                RowBox[{"{", 
                 RowBox[{"opts", ",", 
                  RowBox[{"Options", "[", "EcoEq", "]"}]}], "}"}], "]"}]}], 
              "]"}]}], "]"}]}], ",", "\n", "\t", 
          RowBox[{"verbosity", "=", 
           RowBox[{"Evaluate", "[", 
            RowBox[{"Verbosity", "/.", 
             RowBox[{"Flatten", "[", 
              RowBox[{"{", 
               RowBox[{"opts", ",", 
                RowBox[{"Options", "[", "EcoEq", "]"}]}], "}"}], "]"}]}], 
            "]"}]}]}], "\n", "]"}], ";", "\n", 
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{"IntegerQ", "[", "Global`$verbosity", "]"}], ",", 
          RowBox[{"verbosity", "=", 
           RowBox[{"Max", "[", 
            RowBox[{"Global`$verbosity", ",", "verbosity"}], "]"}]}]}], "]"}],
         ";", "\n", "\n", 
        RowBox[{"(*", " ", 
         RowBox[{"handle", " ", "options"}], " ", "*)"}], "\n", "\n", 
        RowBox[{"findrootsopts", "=", 
         RowBox[{"Evaluate", "[", 
          RowBox[{"FindRootsOpts", "/.", 
           RowBox[{"Flatten", "[", 
            RowBox[{"{", 
             RowBox[{"opts", ",", 
              RowBox[{"Options", "[", "EcoEq", "]"}]}], "}"}], "]"}]}], 
          "]"}]}], ";", "\n", 
        RowBox[{"fixed", "=", 
         RowBox[{"Evaluate", "[", 
          RowBox[{"Fixed", "/.", 
           RowBox[{"Flatten", "[", 
            RowBox[{"{", 
             RowBox[{"opts", ",", 
              RowBox[{"Options", "[", "EcoEq", "]"}]}], "}"}], "]"}]}], 
          "]"}]}], ";", "\n", 
        RowBox[{"chop", "=", 
         RowBox[{"Evaluate", "[", 
          RowBox[{"Chop", "/.", 
           RowBox[{"Flatten", "[", 
            RowBox[{"{", 
             RowBox[{"opts", ",", 
              RowBox[{"Options", "[", "EcoEq", "]"}]}], "}"}], "]"}]}], 
          "]"}]}], ";", "\n", 
        RowBox[{"qss", "=", 
         RowBox[{"Evaluate", "[", 
          RowBox[{"QSS", "/.", 
           RowBox[{"Flatten", "[", 
            RowBox[{"{", 
             RowBox[{"opts", ",", 
              RowBox[{"Options", "[", "EcoEq", "]"}]}], "}"}], "]"}]}], 
          "]"}]}], ";", "\n", "\n", 
        RowBox[{"(*", " ", 
         RowBox[{"fix", " ", "attributes"}], " ", "*)"}], "\n", 
        RowBox[{"attributes", "=", 
         RowBox[{"FixAttributes", "[", "attributesin", "]"}]}], ";", "\n", 
        "\n", 
        RowBox[{"(*", " ", 
         RowBox[{
         "figure", " ", "out", " ", "number", " ", "of", " ", "species", " ", 
          "in", " ", "guilds"}], " ", "*)"}], "\n", 
        RowBox[{"Set\[ScriptCapitalN]", "[", "attributes", "]"}], ";", "\n", 
        RowBox[{"VPrint", "[", 
         RowBox[{"3", ",", "\"\<\[ScriptCapitalN]=\>\"", ",", 
          RowBox[{"Table", "[", 
           RowBox[{
            RowBox[{"\[ScriptCapitalN]", "[", "gu", "]"}], ",", 
            RowBox[{"{", 
             RowBox[{"gu", ",", "guilds"}], "}"}]}], "]"}]}], "]"}], ";", 
        "\n", "\n", "\n", 
        RowBox[{"fixedvars", "=", 
         RowBox[{"fixed", "\[LeftDoubleBracket]", 
          RowBox[{"All", ",", "1"}], "\[RightDoubleBracket]"}]}], ";", "\n", 
        RowBox[{"nonfixedvars", "=", 
         RowBox[{"OrderedComplement", "[", 
          RowBox[{"AllVariables", ",", "fixedvars"}], "]"}]}], ";", "\n", 
        RowBox[{"VPrint", "[", 
         RowBox[{"3", ",", "\"\<nonfixedvars=\>\"", ",", "nonfixedvars"}], 
         "]"}], ";", "\n", "\n", 
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{"qss", "\[Equal]", "False"}], ",", "\n", "\t", 
          RowBox[{"fixed", "=", 
           RowBox[{"JoinFirst", "[", 
            RowBox[{"fixed", ",", 
             RowBox[{"Replace", "[", 
              RowBox[{"nonvars", ",", 
               RowBox[{"x_", "\[Rule]", 
                RowBox[{"(", 
                 RowBox[{"x", "\[Rule]", "0"}], ")"}]}], ",", "1"}], "]"}]}], 
            "]"}]}], ",", "\n", "\t", 
          RowBox[{"fixed", "=", 
           RowBox[{"JoinFirst", "[", 
            RowBox[{"fixed", ",", 
             RowBox[{"Replace", "[", 
              RowBox[{"nonvars", ",", 
               RowBox[{"x_", "\[Rule]", 
                RowBox[{"(", 
                 RowBox[{"x", "\[Rule]", "x"}], ")"}]}], ",", "1"}], "]"}]}], 
            "]"}]}]}], "\n", "]"}], ";", "\n", "\n", 
        RowBox[{"(*", " ", 
         RowBox[{
          RowBox[{"set", " ", "eqns"}], ",", " ", 
          RowBox[{"unks", " ", "and", " ", "ics"}]}], " ", "*)"}], "\n", 
        RowBox[{"eqns", "=", 
         RowBox[{"EcoEqEqns", "[", 
          RowBox[{"attributes", ",", "Gsin", ",", "opts"}], "]"}]}], ";", 
        "\n", 
        RowBox[{"unks", "=", "vars"}], ";", "\n", "\n", 
        RowBox[{"VPrint", "[", 
         RowBox[{"3", ",", "\"\<eqns=\>\"", ",", "eqns"}], "]"}], ";", "\n", 
        RowBox[{"VPrint", "[", 
         RowBox[{"3", ",", "\"\<unks=\>\"", ",", "unks"}], "]"}], ";", "\n", 
        "\n", 
        RowBox[{"(*", " ", 
         RowBox[{"solve", " ", "it"}], " ", "*)"}], "\n", "\n", 
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{"verbosity", ">=", "1"}], ",", 
          RowBox[{"With", "[", 
           RowBox[{
            RowBox[{"{", 
             RowBox[{
              RowBox[{"eqns", "=", "eqns"}], ",", 
              RowBox[{"unks", "=", "unks"}], ",", 
              RowBox[{"options", "=", 
               RowBox[{"Sequence", "@@", "findrootsopts"}]}]}], "}"}], ",", 
            RowBox[{"PrintCall", "[", 
             RowBox[{"Global`sol", "=", 
              RowBox[{"FindRoots", "[", 
               RowBox[{"eqns", ",", "unks", ",", "options"}], "]"}]}], 
             "]"}]}], "]"}]}], "]"}], ";", "\n", 
        RowBox[{"sol", "=", 
         RowBox[{"FindRoots", "[", 
          RowBox[{"eqns", ",", "unks", ",", 
           RowBox[{"Evaluate", "[", 
            RowBox[{"Sequence", "@@", "findrootsopts"}], "]"}]}], "]"}]}], 
        ";", "\n", 
        RowBox[{"VPrint", "[", 
         RowBox[{"3", ",", "\"\<sol=\>\"", ",", "sol"}], "]"}], ";", "\n", 
        "\n", "\n", 
        RowBox[{"(*", " ", 
         RowBox[{"add", " ", "in", " ", "Fixed", " ", "variables"}], " ", 
         "*)"}], "\n", 
        RowBox[{"res", "=", 
         RowBox[{
          RowBox[{
           RowBox[{"Join", "[", 
            RowBox[{
             RowBox[{"DeleteCases", "[", 
              RowBox[{"fixed", ",", 
               RowBox[{"var_", "\[Rule]", "var_"}]}], "]"}], ",", "#"}], 
            "]"}], "&"}], " ", "/@", " ", "sol"}]}], ";", "\n", "\n", 
        RowBox[{"If", "[", 
         RowBox[{"chop", ",", "\n", "\t", 
          RowBox[{"Return", "[", 
           RowBox[{"SortRuleList", "[", 
            RowBox[{
             RowBox[{"EqSort", "[", 
              RowBox[{"Chop", "[", "res", "]"}], "]"}], ",", "AllVariables"}],
             "]"}], "]"}], ",", "\n", "\t", 
          RowBox[{"Return", "[", 
           RowBox[{"SortRuleList", "[", 
            RowBox[{
             RowBox[{"EqSort", "[", "res", "]"}], ",", "AllVariables"}], 
            "]"}], "]"}]}], "\n", "]"}], ";"}]}], "\n", "\n", "]"}]}], 
    "]"}]}], ";"}]], "Code",
 CellChangeTimes->{{3.687881450105945*^9, 3.6878814505620613`*^9}, {
   3.68857168476537*^9, 3.688571684934305*^9}, {3.6885717562075033`*^9, 
   3.688571756902958*^9}, {3.688571805445076*^9, 3.6885718054840527`*^9}, {
   3.6885777801299953`*^9, 3.688577821198338*^9}, {3.688578111707645*^9, 
   3.688578263696265*^9}, {3.688583189141659*^9, 3.688583201104134*^9}, {
   3.6885837935779333`*^9, 3.688583810589251*^9}, {3.688583857663521*^9, 
   3.688583866440373*^9}, 3.688584023610524*^9, {3.688584454327429*^9, 
   3.688584464134824*^9}, {3.6885851260336657`*^9, 3.6885852077551622`*^9}, 
   3.688685223038662*^9, {3.693593326673889*^9, 3.693593328006213*^9}, {
   3.693651209563744*^9, 3.693651212696253*^9}, {3.693651330751341*^9, 
   3.693651337237907*^9}, {3.693700342037077*^9, 3.6937003445534773`*^9}, {
   3.69961046687166*^9, 3.699610497623667*^9}, 3.709124896659213*^9, {
   3.709336699110145*^9, 3.709336699577385*^9}, {3.7101059510781393`*^9, 
   3.710105954644555*^9}, {3.710254347130986*^9, 3.710254357145165*^9}, {
   3.710254389172209*^9, 3.7102544454183407`*^9}, {3.710286418340989*^9, 
   3.710286419629771*^9}, 3.710286914350444*^9, 3.7127385346721067`*^9, {
   3.714088449593779*^9, 3.714088465042605*^9}, {3.714088783139654*^9, 
   3.714088791448407*^9}, {3.714088844203219*^9, 3.71408885600861*^9}, 
   3.714089170503827*^9, {3.7140892855105886`*^9, 3.7140893056027193`*^9}, {
   3.7146455898601007`*^9, 3.714645607554661*^9}, {3.714645833218658*^9, 
   3.714645878205338*^9}, {3.7146594716484127`*^9, 3.714659498519136*^9}, {
   3.714659560420806*^9, 3.714659597546504*^9}, {3.714661306250412*^9, 
   3.7146613128544407`*^9}, {3.7146613520466423`*^9, 3.714661374692927*^9}, {
   3.714661426985828*^9, 3.714661471021627*^9}, {3.714670952581798*^9, 
   3.7146709761045732`*^9}, {3.714673053941062*^9, 3.71467307388553*^9}, {
   3.714673325535184*^9, 3.7146733431977777`*^9}, {3.714673385822101*^9, 
   3.714673408156714*^9}, {3.7146763296033154`*^9, 3.714676349908175*^9}, {
   3.714676870217898*^9, 3.7146768813446712`*^9}, {3.714677005871266*^9, 
   3.7146770388481817`*^9}, {3.714677885477186*^9, 3.714677895396152*^9}, {
   3.7146815798359137`*^9, 3.71468158317702*^9}, {3.714686709068077*^9, 
   3.714686720449131*^9}, {3.714686780357995*^9, 3.714686847805605*^9}, {
   3.714686886251251*^9, 3.7146869069408197`*^9}, {3.7146904343318*^9, 
   3.714690435561199*^9}, {3.7146905887398357`*^9, 3.714690601923481*^9}, {
   3.714690631972337*^9, 3.714690933211876*^9}, {3.714691441205781*^9, 
   3.7146914443765163`*^9}, 3.714771558293874*^9, {3.71477345759927*^9, 
   3.714773544216226*^9}, {3.714773631881823*^9, 3.714773638759398*^9}, {
   3.7147737076976557`*^9, 3.714773768872843*^9}, {3.714773810344654*^9, 
   3.714773862655966*^9}, {3.714774175646474*^9, 3.714774238321686*^9}, {
   3.714774276778345*^9, 3.714774313756324*^9}, {3.714774363666697*^9, 
   3.714774431577939*^9}, {3.71477474128935*^9, 3.714774765274622*^9}, {
   3.714774824264062*^9, 3.7147748384112673`*^9}, {3.7147748942865953`*^9, 
   3.7147749226594543`*^9}, {3.7147749728240833`*^9, 
   3.7147749743011627`*^9}, {3.714777387544536*^9, 3.714777422944803*^9}, {
   3.715423204967746*^9, 3.715423247100832*^9}, {3.716851794553669*^9, 
   3.716851838573512*^9}, {3.716851923962669*^9, 3.71685195096766*^9}, {
   3.716852009532653*^9, 3.716852055393906*^9}, {3.716852216771632*^9, 
   3.71685231192962*^9}, {3.7168523670615377`*^9, 3.71685238929698*^9}, {
   3.7168524239048243`*^9, 3.716852506519627*^9}, {3.7168526119630947`*^9, 
   3.716852660342918*^9}, {3.720561423750366*^9, 3.720561426334433*^9}, {
   3.720561478834214*^9, 3.720561481166069*^9}, {3.721849189319437*^9, 
   3.72184920349916*^9}, {3.721849430040469*^9, 3.7218494327297087`*^9}, 
   3.7218496199026947`*^9, {3.722043437583398*^9, 3.722043661426222*^9}, {
   3.722083757551734*^9, 3.72208381655929*^9}, {3.725055711251069*^9, 
   3.725055715332081*^9}, 3.7251409579843616`*^9, 3.725141965221623*^9, {
   3.728485760884264*^9, 3.728485790162279*^9}, {3.728492488068541*^9, 
   3.728492510850383*^9}, {3.728493399302709*^9, 3.728493401619061*^9}, {
   3.7284934402687283`*^9, 3.728493443062832*^9}, {3.728495197386813*^9, 
   3.7284952624184313`*^9}, {3.728495727453259*^9, 3.7284957368624372`*^9}, {
   3.728495928466558*^9, 3.72849592873841*^9}, {3.731976096240344*^9, 
   3.7319762267049303`*^9}, {3.731976277432869*^9, 3.7319762780290833`*^9}, {
   3.7319768020188913`*^9, 3.731976803777299*^9}, {3.731976892921598*^9, 
   3.731976916165578*^9}, {3.731976959563902*^9, 3.731976962085402*^9}, {
   3.731977155942281*^9, 3.73197716443357*^9}, {3.731977195279862*^9, 
   3.7319772065728207`*^9}, {3.731977279507853*^9, 3.731977284166617*^9}, {
   3.731977461555399*^9, 3.731977465980788*^9}, {3.731978006012163*^9, 
   3.731978013040636*^9}, {3.731978082421216*^9, 3.731978094010425*^9}, {
   3.731979039353709*^9, 3.731979039363929*^9}, {3.731979598523592*^9, 
   3.73197961490341*^9}, {3.73197972820308*^9, 3.7319797289924088`*^9}, {
   3.731980249144205*^9, 3.73198026694471*^9}, 3.731980373788886*^9, {
   3.7319804050810537`*^9, 3.731980445644969*^9}, {3.731980548309566*^9, 
   3.731980566185113*^9}, {3.731980610588462*^9, 3.7319806369962673`*^9}, {
   3.731980738391506*^9, 3.731980763895586*^9}, {3.731980818773868*^9, 
   3.731980857708199*^9}, {3.731980943731715*^9, 3.731981000719969*^9}, 
   3.731981067123608*^9, {3.732221099817436*^9, 3.7322211073866863`*^9}, {
   3.732237132742322*^9, 3.73223714782172*^9}, {3.732237266376129*^9, 
   3.732237271289744*^9}, {3.732273382440886*^9, 3.73227340932165*^9}, {
   3.732273491519849*^9, 3.732273491669429*^9}, {3.732394286439495*^9, 
   3.732394371996009*^9}, 3.755182267229639*^9, 3.755184973022751*^9, {
   3.75582209648076*^9, 3.7558220982190313`*^9}, {3.7558225635660257`*^9, 
   3.7558225772644787`*^9}, {3.7585221898099403`*^9, 3.7585221899906693`*^9}, 
   3.759140406004279*^9, {3.75914072046175*^9, 3.759140778591229*^9}, {
   3.759141110454555*^9, 3.7591411170112877`*^9}, 3.759142070148613*^9, {
   3.759926864600369*^9, 3.759926908779594*^9}, {3.7599440817309227`*^9, 
   3.759944089031756*^9}, {3.7599442652749147`*^9, 3.7599442925085506`*^9}, {
   3.759944468213972*^9, 3.759944470421031*^9}, {3.759944509678103*^9, 
   3.759944625568841*^9}, {3.759944680926206*^9, 3.759944704050845*^9}, {
   3.759944777100625*^9, 3.759944777332377*^9}, {3.7599452123441133`*^9, 
   3.759945212472487*^9}, 3.761151167307536*^9, 3.7613779187363462`*^9, {
   3.769182368428945*^9, 3.7691823684332743`*^9}, {3.769182447225265*^9, 
   3.769182447229724*^9}, 3.7697607053790417`*^9, 3.770438265000821*^9, {
   3.770721434046843*^9, 3.770721434486648*^9}, {3.7746909735763407`*^9, 
   3.774690974277783*^9}, 3.786090308105297*^9, 3.7860903405306396`*^9, {
   3.7861697725876913`*^9, 3.7861697838397303`*^9}, {3.7861698579109*^9, 
   3.7861698645494623`*^9}, {3.786257005170101*^9, 3.786257029661643*^9}, {
   3.786259628183383*^9, 3.78625966453019*^9}, {3.7862596972230663`*^9, 
   3.7862597130857067`*^9}, {3.786260599076335*^9, 3.7862606519012136`*^9}, {
   3.786260711471278*^9, 3.7862607825400476`*^9}, {3.786262427305735*^9, 
   3.7862624297094097`*^9}, {3.786262672446123*^9, 3.7862626757022247`*^9}, {
   3.7941372405540857`*^9, 3.794137240568924*^9}, 3.798128132723709*^9, {
   3.798232559307932*^9, 3.798232607817318*^9}, 3.8002032936287107`*^9, {
   3.800228806267811*^9, 3.8002288701566067`*^9}, {3.800229240434243*^9, 
   3.8002292588092833`*^9}, {3.800230257115494*^9, 3.800230271819356*^9}, {
   3.800230689976359*^9, 3.800230696507571*^9}, {3.800230861506472*^9, 
   3.8002308853617268`*^9}, {3.800231148936945*^9, 3.8002311628361807`*^9}, {
   3.800269707014142*^9, 3.80026972050751*^9}, {3.8004654280139236`*^9, 
   3.8004654993620977`*^9}, {3.807369332962606*^9, 3.807369333743342*^9}, {
   3.807369626808475*^9, 3.807369633505528*^9}, {3.807376451767674*^9, 
   3.807376461724361*^9}, {3.8154778674250393`*^9, 3.8154778786474133`*^9}, {
   3.8154783955502*^9, 3.8154784000536633`*^9}, {3.815479106257626*^9, 
   3.815479107656157*^9}, {3.829315987079705*^9, 3.829316001463244*^9}, 
   3.833033078563163*^9, {3.833033108685328*^9, 3.833033148581917*^9}, 
   3.833038502668605*^9, 3.835030194667267*^9, {3.859148473878541*^9, 
   3.859148484706414*^9}, 3.8591503881615667`*^9, 3.8594808660648727`*^9, 
   3.8594809215028048`*^9, {3.859481010380721*^9, 3.859481014177998*^9}, {
   3.85948118066334*^9, 3.859481183379318*^9}, {3.859481298816181*^9, 
   3.859481315770236*^9}, {3.859481351730167*^9, 3.859481376563326*^9}, {
   3.8595884244545803`*^9, 3.859588479932879*^9}, {3.859588743998242*^9, 
   3.859588765495607*^9}, {3.859588806482554*^9, 3.859588926483329*^9}, {
   3.859589076697467*^9, 3.8595890862667627`*^9}, {3.859589141801827*^9, 
   3.859589247695283*^9}, {3.859589278802657*^9, 3.8595893184973927`*^9}, {
   3.859589355053155*^9, 3.859589394885363*^9}, {3.8595894565019217`*^9, 
   3.859589464785759*^9}, {3.859589499943409*^9, 3.8595895551048613`*^9}, {
   3.859589593067071*^9, 3.8595896843311996`*^9}, 3.859589915082026*^9, {
   3.859589979348977*^9, 3.8595899793771067`*^9}, {3.859590726243621*^9, 
   3.859590757603325*^9}, 3.859640095466408*^9, {3.859648360374277*^9, 
   3.859648389450727*^9}, {3.859649217444069*^9, 3.85964922877459*^9}, {
   3.859657651647107*^9, 3.859657715461317*^9}, {3.8597223431582127`*^9, 
   3.859722349203199*^9}, {3.870793309356901*^9, 3.870793309988036*^9}, {
   3.87080208821593*^9, 3.870802088677804*^9}, {3.870802244077537*^9, 
   3.870802296636217*^9}, {3.870802357580971*^9, 3.87080245723883*^9}, 
   3.870802612669882*^9, 3.870802788735717*^9, {3.870802846876346*^9, 
   3.870802848200943*^9}, {3.870803031811883*^9, 3.870803102487256*^9}, {
   3.870803157084508*^9, 3.8708031633988543`*^9}, 3.870808993315262*^9, 
   3.870809855076426*^9, {3.8708123462502623`*^9, 3.870812379818925*^9}, {
   3.870812478768371*^9, 3.8708125843966827`*^9}, {3.870812988485611*^9, 
   3.870813004612667*^9}, {3.870813038511217*^9, 3.870813073577588*^9}, {
   3.871690976581669*^9, 3.871690976965514*^9}, {3.871693399098466*^9, 
   3.871693400265373*^9}, {3.871694178360486*^9, 3.871694178697722*^9}, {
   3.8716943495684*^9, 3.871694352246119*^9}, {3.871695145598317*^9, 
   3.871695145915769*^9}},ExpressionUUID->"863e3f00-74d5-4499-959d-\
d568a50d4400"]
}, Open  ]],

Cell[CellGroupData[{

Cell["Options", "Subsubsection",ExpressionUUID->"614bd84e-e577-4849-8b24-a4f308a3bf91"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"Options", "[", "EcoEq", "]"}], "=", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"Method", "\[Rule]", "Automatic"}], ",", "\n", 
     RowBox[{"SolveOpts", "\[Rule]", 
      RowBox[{"{", 
       RowBox[{"(*", 
        RowBox[{"Reals", ","}], "*)"}], "}"}]}], ",", 
     RowBox[{"NSolveOpts", "\[Rule]", 
      RowBox[{"{", 
       RowBox[{"(*", 
        RowBox[{"Reals", ","}], "*)"}], 
       RowBox[{"Method", "\[Rule]", "\"\<EndomorphismMatrix\>\""}], "}"}]}], 
     ",", 
     RowBox[{"FindRootOpts", "\[Rule]", 
      RowBox[{"{", "}"}]}], ",", 
     RowBox[{"FindRootsOpts", "->", 
      RowBox[{"{", "}"}]}], ",", "\n", 
     RowBox[{"PerCapita", "\[Rule]", "False"}], ",", 
     RowBox[{"Fixed", "\[Rule]", 
      RowBox[{"{", "}"}]}], ",", 
     RowBox[{"Chop", "\[Rule]", "True"}], ",", 
     RowBox[{"QSS", "\[Rule]", "False"}], ",", 
     RowBox[{"Time", "\[Rule]", "t"}], ",", 
     RowBox[{"Verbose", "\[Rule]", "False"}], ",", 
     RowBox[{"Verbosity", "->", "0"}], ",", 
     RowBox[{"IgnoreVar", "->", "False"}]}], "}"}]}], ";"}]], "Code",
 CellChangeTimes->{
  3.68788145061252*^9, {3.6885716849598207`*^9, 3.688571685061096*^9}, 
   3.6998307192614937`*^9, {3.699830756047996*^9, 3.699830757855876*^9}, {
   3.7146768525874043`*^9, 3.714676860849709*^9}, {3.714771544699765*^9, 
   3.714771544916628*^9}, 3.725140957991322*^9, {3.755266321588594*^9, 
   3.755266324656404*^9}, 3.7553697389508457`*^9, 3.755370573729661*^9, 
   3.75994589946877*^9, 3.7701200065679617`*^9, {3.770645589515258*^9, 
   3.770645593339229*^9}, {3.7982325865648317`*^9, 3.798232589900823*^9}, {
   3.817979839496348*^9, 3.817979840182137*^9}, {3.817986745774179*^9, 
   3.817986747250039*^9}, 3.817986827594922*^9, 3.8293159782581778`*^9, {
   3.859588972329741*^9, 3.859588974605693*^9}, {3.859590467440824*^9, 
   3.859590470000128*^9}, {3.8708128961119843`*^9, 3.870812906654851*^9}, 
   3.870813046791561*^9},ExpressionUUID->"fdf4ab12-80a1-498e-8737-\
49c18c798d4d"]
}, Open  ]],

Cell[CellGroupData[{

Cell["Messages", "Subsubsection",
 CellChangeTimes->{{3.7695018515541153`*^9, 
  3.769501852845079*^9}},ExpressionUUID->"7f536b05-6cee-41d3-992f-\
3007157da920"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"EcoEq", "::", "noneq"}], "=", "\n", 
   "\"\<Can't find equilibrium of periodically forced model with FindRoot.  \
Give Time option or try FindEcoCycle instead.\>\""}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"EcoEq", "::", "nosol"}], "=", 
   "\"\<`1` couldn't find a solution.  Try FindEcoEq instead.\>\""}], 
  ";"}]}], "Code",
 CellChangeTimes->{{3.769501857001574*^9, 3.769501857579821*^9}, {
  3.8596474251654797`*^9, 
  3.859647429307817*^9}},ExpressionUUID->"efab01bc-b2a5-49e5-ba35-\
8a147499154e"]
}, Open  ]]
}, Open  ]]
},
WindowSize->{808, 911},
WindowMargins->{{876, Automatic}, {Automatic, -38}},
Magnification->1.25,
FrontEndVersion->"13.1 for Mac OS X ARM (64-bit) (June 16, 2022)",
StyleDefinitions->"Default.nb",
ExpressionUUID->"9ef88fe1-d409-4f62-b893-19013e7a062a"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[CellGroupData[{
Cell[580, 22, 271, 4, 67, "Subsection",ExpressionUUID->"64e26179-57be-452a-8637-12a76c8bf6c0"],
Cell[CellGroupData[{
Cell[876, 30, 156, 3, 56, "Subsubsection",ExpressionUUID->"1a30368b-a77d-4c48-8625-b15076ecfbfc"],
Cell[1035, 35, 2321, 42, 402, "Code",ExpressionUUID->"00fee588-7b4a-449c-92bd-40d3d7dca363"]
}, Open  ]],
Cell[CellGroupData[{
Cell[3393, 82, 160, 3, 56, "Subsubsection",ExpressionUUID->"2c69f6eb-c726-466e-b337-7aee2473f283"],
Cell[3556, 87, 3046, 71, 162, "Code",ExpressionUUID->"b6bd6869-e0d7-4a73-8760-daf0ec75cea8"]
}, Open  ]],
Cell[CellGroupData[{
Cell[6639, 163, 186, 3, 56, "Subsubsection",ExpressionUUID->"70dd1449-e335-4e66-b1fb-3829b16cf57e"],
Cell[6828, 168, 22229, 433, 2014, "Code",ExpressionUUID->"581b889c-77e1-4015-a4d7-dad9fdddcbe5"],
Cell[29060, 603, 21183, 408, 2440, "Code",ExpressionUUID->"0e0059c0-4683-446a-8e20-83a16fbbb027"],
Cell[50246, 1013, 20419, 389, 2290, "Code",ExpressionUUID->"298d376b-292b-4f64-9302-222697f26fe4"],
Cell[70668, 1404, 21603, 411, 2316, "Code",ExpressionUUID->"42c2d6c7-2b41-4fc7-b900-a08d6087cbbb"],
Cell[92274, 1817, 19666, 367, 1662, "Code",ExpressionUUID->"863e3f00-74d5-4499-959d-d568a50d4400"]
}, Open  ]],
Cell[CellGroupData[{
Cell[111977, 2189, 87, 0, 56, "Subsubsection",ExpressionUUID->"614bd84e-e577-4849-8b24-a4f308a3bf91"],
Cell[112067, 2191, 2012, 43, 114, "Code",ExpressionUUID->"fdf4ab12-80a1-498e-8737-49c18c798d4d"]
}, Open  ]],
Cell[CellGroupData[{
Cell[114116, 2239, 161, 3, 56, "Subsubsection",ExpressionUUID->"7f536b05-6cee-41d3-992f-3007157da920"],
Cell[114280, 2244, 561, 14, 114, "Code",ExpressionUUID->"efab01bc-b2a5-49e5-ba35-8a147499154e"]
}, Open  ]]
}, Open  ]]
}
]
*)

(* End of internal cache information *)

